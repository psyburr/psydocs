<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>portablectl</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html">Index </a>·
  <a href="systemd.directives.html">Directives </a><span style="float:right">systemd 249</span><hr><div class="refentry"><a name="portablectl"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>portablectl — Attach, detach or inspect portable service images</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">portablectl</code>  [OPTIONS...] {COMMAND} [NAME...]</p></div></div><div class="refsect1"><a name="id-1.5"></a><h2 id="Description">Description<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Description">¶</a></h2><p><span class="command"><strong>portablectl</strong></span> may be used to attach, detach or inspect portable service images. It's
    primarily a command interfacing with
    <a href="systemd-portabled.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd-portabled.service</span>(8)</span></a>.</p><p>Portable service images contain an OS file system tree along with
    <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a> unit file
    information. A service image may be "attached" to the local system. If attached, a set of unit files are copied
    from the image to the host, and extended with <code class="varname">RootDirectory=</code> or <code class="varname">RootImage=</code>
    assignments (in case of service units) pointing to the image file or directory, ensuring the services will run
    within the file system context of the image.</p><p>Portable service images are an efficient way to bundle multiple related services and other units together,
    and transfer them as a whole between systems. When these images are attached the local system the contained units
    may run in most ways like regular system-provided units, either with full privileges or inside strict sandboxing,
    depending on the selected configuration.</p><p>Specifically portable service images may be of the following kind:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Directory trees containing an OS, including the top-level directories <code class="filename">/usr/</code>,
      <code class="filename">/etc/</code>, and so on.</p></li><li class="listitem"><p>btrfs subvolumes containing OS trees, similar to normal directory trees.</p></li><li class="listitem"><p>Binary "raw" disk images containing MBR or GPT partition tables and Linux file system
      partitions. (These must be regular files, with the <code class="filename">.raw</code> suffix.)</p></li></ul></div></div><div class="refsect1"><a name="id-1.6"></a><h2 id="Commands">Commands<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Commands">¶</a></h2><p>The following commands are understood:</p><div class="variablelist"><dl class="variablelist"><dt id="list"><span class="term"><span class="command"><strong>list</strong></span></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#list">¶</a></dt><dd><p>List available portable service images. This will list all portable service images discovered
        in the portable image search paths (see below), along with brief metadata and state information. Note that many
        of the commands below may both operate on images inside and outside of the search paths. This command is hence
        mostly a convenience option, the commands are generally not restricted to what this list
        shows.</p></dd><dt id="attach IMAGE [PREFIX…]"><span class="term"><span class="command"><strong>attach</strong></span> <em class="replaceable"><code>IMAGE</code></em> [<em class="replaceable"><code>PREFIX…</code></em>]</span><a class="headerlink" title="Permalink to this term" href="portablectl.html#attach%20IMAGE%20%5BPREFIX%E2%80%A6%5D">¶</a></dt><dd><p>Attach a portable service image to the host system. Expects a file system path to a portable
        service image file or directory as first argument. If the specified path contains no slash character
        ("<code class="literal">/</code>") it is understood as image filename that is searched for in the portable service image
        search paths (see below). To reference a file in the current working directory prefix the filename with
        "<code class="literal">./</code>" to avoid this search path logic.</p><p>When a portable service is attached four operations are executed:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>All unit files of types <code class="filename">.service</code>, <code class="filename">.socket</code>,
          <code class="filename">.target</code>, <code class="filename">.timer</code> and <code class="filename">.path</code> which match the
          indicated unit file name prefix are copied from the image to the host's
          <code class="filename">/etc/systemd/system.attached/</code> directory (or
          <code class="filename">/run/systemd/system.attached/</code> — depending whether <code class="option">--runtime</code> is
          specified, see above), which is included in the built-in unit search path of the system service
          manager.</p></li><li class="listitem"><p>For unit files of type <code class="filename">.service</code> a drop-in is added to these copies that
          adds <code class="varname">RootDirectory=</code> or <code class="varname">RootImage=</code> settings (see
          <a href="systemd.unit.html#"><span class="citerefentry"><span class="refentrytitle">systemd.unit</span>(5)</span></a> for
          details), that ensures these services are run within the file system of the originating portable service
          image.</p></li><li class="listitem"><p>A second drop-in is created: the "profile" drop-in, that may contain additional security
          settings (and other settings). A number of profiles are available by default but administrators may define
          their own ones. See below.</p></li><li class="listitem"><p>If the portable service image file is not already in the search path (see below), a symbolic
          link to it is created in <code class="filename">/etc/portables/</code> or
          <code class="filename">/run/portables/</code>, to make sure it is included in it.</p></li></ol></div><p>By default all unit files whose names start with a prefix generated from the image's file name are copied
        out. Specifically, the prefix is determined from the image file name with any suffix such as
        <code class="filename">.raw</code> removed, truncated at the first occurrence of an underscore character
        ("<code class="literal">_</code>"), if there is one. The underscore logic is supposed to be used to versioning so that the
        an image file <code class="filename">foobar_47.11.raw</code> will result in a unit file matching prefix of
        <code class="filename">foobar</code>. This prefix is then compared with all unit files names contained in the image in
        the usual directories, but only unit file names where the prefix is followed by "<code class="literal">-</code>",
        "<code class="literal">.</code>" or "<code class="literal">@</code>" are considered. Example: if a portable service image file is named
        <code class="filename">foobar_47.11.raw</code> then by default all its unit files with names such as
        <code class="filename">foobar-quux-waldi.service</code>, <code class="filename">foobar.service</code> or
        <code class="filename">foobar@.service</code> will be considered. It's possible to override the matching prefix: all
        strings listed on the command line after the image file name are considered prefixes, overriding the implicit
        logic where the prefix is derived from the image file name.</p><p>By default, after the unit files are attached the service manager's configuration is reloaded, except
        when <code class="option">--no-reload</code> is specified (see above). This ensures that the new units made available to
        the service manager are seen by it.</p><p>If <code class="option">--now</code> and/or <code class="option">--enable</code> are passed, the portable service(s) are
        immediately started (blocking operation unless <code class="option">--no-block</code> is passed) and/or enabled after
        attaching the image.</p></dd><dt id="detach IMAGE [PREFIX…]"><span class="term"><span class="command"><strong>detach</strong></span> <em class="replaceable"><code>IMAGE</code></em> [<em class="replaceable"><code>PREFIX…</code></em>]</span><a class="headerlink" title="Permalink to this term" href="portablectl.html#detach%20IMAGE%20%5BPREFIX%E2%80%A6%5D">¶</a></dt><dd><p>Detaches a portable service image from the host. This undoes the operations executed by the
        <span class="command"><strong>attach</strong></span> command above, and removes the unit file copies, drop-ins and image symlink
        again. This command expects an image name or path as parameter. Note that if a path is specified only the last
        component of it (i.e. the file or directory name itself, not the path to it) is used for finding matching unit
        files. This is a convenience feature to allow all arguments passed as <span class="command"><strong>attach</strong></span> also to
        <span class="command"><strong>detach</strong></span>.</p></dd><dt id="reattach IMAGE [PREFIX…]"><span class="term"><span class="command"><strong>reattach</strong></span> <em class="replaceable"><code>IMAGE</code></em> [<em class="replaceable"><code>PREFIX…</code></em>]</span><a class="headerlink" title="Permalink to this term" href="portablectl.html#reattach%20IMAGE%20%5BPREFIX%E2%80%A6%5D">¶</a></dt><dd><p>Detaches an existing portable service image from the host, and immediately attaches it again.
        This is useful in case the image was replaced. Running units are not stopped during the process. Partial matching,
        to allow for different versions in the image name, is allowed: only the part before the first "<code class="literal">_</code>"
        character has to match. If the new image doesn't exist, the existing one will not be detached. The parameters
        follow the same syntax as the <span class="command"><strong>attach</strong></span> command.</p></dd><dt id="inspect IMAGE [PREFIX…]"><span class="term"><span class="command"><strong>inspect</strong></span> <em class="replaceable"><code>IMAGE</code></em> [<em class="replaceable"><code>PREFIX…</code></em>]</span><a class="headerlink" title="Permalink to this term" href="portablectl.html#inspect%20IMAGE%20%5BPREFIX%E2%80%A6%5D">¶</a></dt><dd><p>Extracts various metadata from a portable service image and presents it to the
        caller. Specifically, the
        <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> file of the
        image is retrieved as well as all matching unit files. By default a short summary showing the most relevant
        metadata in combination with a list of matching unit files is shown (that is the unit files
        <span class="command"><strong>attach</strong></span> would install to the host system). If combined with <code class="option">--cat</code> (see
        above), the <code class="filename">os-release</code> data and the units files' contents is displayed unprocessed. This
        command is useful to determine whether an image qualifies as portable service image, and which unit files are
        included. This command expects the path to the image as parameter, optionally followed by a list of unit file
        prefixes to consider, similar to the <span class="command"><strong>attach</strong></span> command described above.</p></dd><dt id="is-attached IMAGE"><span class="term"><span class="command"><strong>is-attached</strong></span> <em class="replaceable"><code>IMAGE</code></em></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#is-attached%20IMAGE">¶</a></dt><dd><p>Determines whether the specified image is currently attached or not. Unless combined with the
        <code class="option">--quiet</code> switch this will show a short state identifier for the image. Specifically:</p><div class="table"><a name="id-1.6.3.6.2.2"></a><p class="title"><b>Table 1. Image attachment states</b></p><div class="table-contents"><table class="table" summary="Image attachment states" border="1"><colgroup><col class="state"><col class="description"></colgroup><thead><tr><th>State</th><th>Description</th></tr></thead><tbody><tr><td><code class="option">detached</code></td><td>The image is currently not attached.</td></tr><tr><td><code class="option">attached</code></td><td>The image is currently attached, i.e. its unit files have been made available to the host system.</td></tr><tr><td><code class="option">attached-runtime</code></td><td>Like <code class="option">attached</code>, but the unit files have been made available transiently only, i.e. the <span class="command"><strong>attach</strong></span> command has been invoked with the <code class="option">--runtime</code> option.</td></tr><tr><td><code class="option">enabled</code></td><td>The image is currently attached, and at least one unit file associated with it has been enabled.</td></tr><tr><td><code class="option">enabled-runtime</code></td><td>Like <code class="option">enabled</code>, but the unit files have been made available transiently only, i.e. the <span class="command"><strong>attach</strong></span> command has been invoked with the <code class="option">--runtime</code> option.</td></tr><tr><td><code class="option">running</code></td><td>The image is currently attached, and at least one unit file associated with it is running.</td></tr><tr><td><code class="option">running-runtime</code></td><td>The image is currently attached transiently, and at least one unit file associated with it is running.</td></tr></tbody></table></div></div><br class="table-break"></dd><dt id="read-only IMAGE [BOOL]"><span class="term"><span class="command"><strong>read-only</strong></span> <em class="replaceable"><code>IMAGE</code></em> [<em class="replaceable"><code>BOOL</code></em>]</span><a class="headerlink" title="Permalink to this term" href="portablectl.html#read-only%20IMAGE%20%5BBOOL%5D">¶</a></dt><dd><p>Marks or (unmarks) a portable service image read-only. Takes an image name, followed by a
        boolean as arguments. If the boolean is omitted, positive is implied, i.e. the image is marked
        read-only.</p></dd><dt id="remove IMAGE…"><span class="term"><span class="command"><strong>remove</strong></span> <em class="replaceable"><code>IMAGE</code></em>…</span><a class="headerlink" title="Permalink to this term" href="portablectl.html#remove%20IMAGE%E2%80%A6">¶</a></dt><dd><p>Removes one or more portable service images. Note that this command will only remove the
        specified image path itself — it refers to a symbolic link then the symbolic link is removed and not the
        image it points to.</p></dd><dt id="set-limit [IMAGE] BYTES"><span class="term"><span class="command"><strong>set-limit</strong></span> [<em class="replaceable"><code>IMAGE</code></em>] <em class="replaceable"><code>BYTES</code></em></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#set-limit%20%5BIMAGE%5D%20BYTES">¶</a></dt><dd><p>Sets the maximum size in bytes that a specific portable service image, or all images, may grow
        up to on disk (disk quota). Takes either one or two parameters. The first, optional parameter refers to a
        portable service image name. If specified, the size limit of the specified image is changed. If omitted, the
        overall size limit of the sum of all images stored locally is changed. The final argument specifies the size
        limit in bytes, possibly suffixed by the usual K, M, G, T units. If the size limit shall be disabled, specify
        "<code class="literal">-</code>" as size.</p><p>Note that per-image size limits are only supported on btrfs file systems. Also, depending on
        <code class="varname">BindPaths=</code> settings in the portable service's unit files directories from the host might be
        visible in the image environment during runtime which are not affected by this setting, as only the image
        itself is counted against this limit.</p></dd></dl></div></div><div class="refsect1"><a name="id-1.7"></a><h2 id="Options">Options<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Options">¶</a></h2><p>The following options are understood:</p><div class="variablelist"><dl class="variablelist"><dt id="-q"><span class="term"><code class="option">-q</code>, </span><span class="term"><code class="option">--quiet</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#-q">¶</a></dt><dd><p>Suppresses additional informational output while running.</p></dd><dt id="-p PROFILE"><span class="term"><code class="option">-p</code> <em class="replaceable"><code>PROFILE</code></em>, </span><span class="term"><code class="option">--profile=</code><em class="replaceable"><code>PROFILE</code></em></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#-p%20PROFILE">¶</a></dt><dd><p>When attaching an image, select the profile to use. By default the "<code class="literal">default</code>"
        profile is used. For details about profiles, see below.</p></dd><dt id="--copy="><span class="term"><code class="option">--copy=</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--copy=">¶</a></dt><dd><p>When attaching an image, select whether to prefer copying or symlinking of files installed into
        the host system. Takes one of "<code class="literal">copy</code>" (to prefer copying of files), "<code class="literal">symlink</code>"
        (to prefer creation of symbolic links) or "<code class="literal">auto</code>" for an intermediary mode where security
        profile drop-ins are symlinked while unit files are copied. Note that this option expresses a preference only,
        in cases where symbolic links cannot be created — for example when the image operated on is a raw disk image,
        and hence not directly referentiable from the host file system — copying of files is used
        unconditionally.</p></dd><dt id="--runtime"><span class="term"><code class="option">--runtime</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--runtime">¶</a></dt><dd><p>When specified the unit and drop-in files are placed in
        <code class="filename">/run/systemd/system.attached/</code> instead of
        <code class="filename">/etc/systemd/system.attached/</code>. Images attached with this option set hence remain attached
        only until the next reboot, while they are normally attached persistently.</p></dd><dt id="--no-reload"><span class="term"><code class="option">--no-reload</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--no-reload">¶</a></dt><dd><p>Don't reload the service manager after attaching or detaching a portable service
        image. Normally the service manager is reloaded to ensure it is aware of added or removed unit
        files.</p></dd><dt id="--cat"><span class="term"><code class="option">--cat</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--cat">¶</a></dt><dd><p>When inspecting portable service images, show the (unprocessed) contents of the metadata files
        pulled from the image, instead of brief summaries. Specifically, this will show the
        <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> and unit file
        contents of the image.</p></dd><dt id="--enable"><span class="term"><code class="option">--enable</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--enable">¶</a></dt><dd><p>Immediately enable/disable the portable service after attaching/detaching.</p></dd><dt id="--now"><span class="term"><code class="option">--now</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--now">¶</a></dt><dd><p>Immediately start/stop/restart the portable service after attaching/before
        detaching/after upgrading.</p></dd><dt id="--no-block"><span class="term"><code class="option">--no-block</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--no-block">¶</a></dt><dd><p>Don't block waiting for attach --now to complete.</p></dd><dt id="--extension=PATH"><span class="term"><code class="option">--extension=</code><em class="replaceable"><code>PATH</code></em></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--extension=PATH">¶</a></dt><dd><p>Add an additional image <em class="replaceable"><code>PATH</code></em> as an overlay on
        top of <em class="replaceable"><code>IMAGE</code></em> when attaching/detaching. This argument can be specified
        multiple times, in which case the order in which images are laid down follows the rules specified in
        <a href="systemd.exec.html#"><span class="citerefentry"><span class="refentrytitle">systemd.exec</span>(5)</span></a>
        for the <code class="varname">ExtensionImages=</code> directive. The image(s) must contain an
        <code class="filename">extension-release</code> file with metadata that matches what is defined in the
        <code class="filename">os-release</code> of <em class="replaceable"><code>IMAGE</code></em>. See:
        <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a>.
        </p><p>Note that the same extensions have to be specified, in the same order, when attaching
        and detaching.</p></dd><dt id="-H"><span class="term"><code class="option">-H</code>, </span><span class="term"><code class="option">--host=</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#-H">¶</a></dt><dd><p><a name="host-text"></a>Execute the operation remotely. Specify a hostname, or a
      username and hostname separated by "<code class="literal">@</code>", to
      connect to. The hostname may optionally be suffixed by a
      port ssh is listening on, separated by "<code class="literal">:</code>", and then a
      container name, separated by "<code class="literal">/</code>", which
      connects directly to a specific container on the specified
      host. This will use SSH to talk to the remote machine manager
      instance. Container names may be enumerated with
      <span class="command"><strong>machinectl -H
      <em class="replaceable"><code>HOST</code></em></strong></span>. Put IPv6 addresses in brackets.</p></dd><dt id="-M"><span class="term"><code class="option">-M</code>, </span><span class="term"><code class="option">--machine=</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#-M">¶</a></dt><dd><p><a name="machine-text"></a>Execute operation on a local container. Specify a container name to connect to, optionally
      prefixed by a user name to connect as and a separating "<code class="literal">@</code>" character. If the special
      string "<code class="literal">.host</code>" is used in place of the container name, a connection to the local
      system is made (which is useful to connect to a specific user's user bus: "<code class="literal">--user
      --machine=lennart@.host</code>"). If the "<code class="literal">@</code>" syntax is not used, the connection is
      made as root user. If the "<code class="literal">@</code>" syntax is used either the left hand side or the right hand
      side may be omitted (but not both) in which case the local user name and "<code class="literal">.host</code>" are
      implied.</p></dd><dt id="--no-pager"><span class="term"><code class="option">--no-pager</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--no-pager">¶</a></dt><dd><p>Do not pipe output into a pager.</p></dd><dt id="--no-legend"><span class="term"><code class="option">--no-legend</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--no-legend">¶</a></dt><dd><p>Do not print the legend, i.e. column headers and the
      footer with hints.</p></dd><dt id="--no-ask-password"><span class="term"><code class="option">--no-ask-password</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--no-ask-password">¶</a></dt><dd><p>Do not query the user for authentication for privileged operations.</p></dd><dt id="-h"><span class="term"><code class="option">-h</code>, </span><span class="term"><code class="option">--help</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#-h">¶</a></dt><dd><p><a name="help-text"></a>Print a short help text and exit.
    </p></dd><dt id="--version"><span class="term"><code class="option">--version</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#--version">¶</a></dt><dd><p><a name="version-text"></a>Print a short version string and exit.</p></dd></dl></div></div><div class="refsect1"><a name="id-1.8"></a><h2 id="Files and Directories">Files and Directories<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Files%20and%20Directories">¶</a></h2><p>Portable service images are preferably stored in <code class="filename">/var/lib/portables/</code>, but are also
    searched for in <code class="filename">/etc/portables/</code>, <code class="filename">/run/systemd/portables/</code>,
    <code class="filename">/usr/local/lib/portables/</code> and <code class="filename">/usr/lib/portables/</code>. It's recommended not
    to place image files directly in <code class="filename">/etc/portables/</code> or
    <code class="filename">/run/systemd/portables/</code> (as these are generally not suitable for storing large or non-textual
    data), but use these directories only for linking images located elsewhere into the image search path.</p><p>When a portable service image is attached, matching unit files are copied onto the host into the
    <code class="filename">/etc/systemd/system.attached/</code> and <code class="filename">/run/systemd/system.attached/</code>
    directories. When an image is detached, the unit files are removed again from these directories.</p></div><div class="refsect1"><a name="id-1.9"></a><h2 id="Profiles">Profiles<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Profiles">¶</a></h2><p>When portable service images are attached a "profile" drop-in is linked in, which may be used to enforce
    additional security (and other) restrictions locally. Four profile drop-ins are defined by default, and shipped in
    <code class="filename">/usr/lib/systemd/portable/profile/</code>. Additional, local profiles may be defined by placing them
    in <code class="filename">/etc/systemd/portable/profile/</code>. The default profiles are:</p><div class="table"><a name="id-1.9.3"></a><p class="title"><b>Table 2. Profiles</b></p><div class="table-contents"><table class="table" summary="Profiles" border="1"><colgroup><col class="state"><col class="description"></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="filename">default</code></td><td>This is the default profile if no other profile name is set via the <code class="option">--profile=</code> (see above). It's fairly restrictive, but should be useful for common, unprivileged system workloads. This includes write access to the logging framework, as well as IPC access to the D-Bus system.</td></tr><tr><td><code class="filename">nonetwork</code></td><td>Very similar to <code class="filename">default</code>, but networking is turned off for any services of the portable service image.</td></tr><tr><td><code class="filename">strict</code></td><td>A profile with very strict settings. This profile excludes IPC (D-Bus) and network access.</td></tr><tr><td><code class="filename">trusted</code></td><td>A profile with very relaxed settings. In this profile the services run with full privileges.</td></tr></tbody></table></div></div><br class="table-break"><p>For details on these profiles and their effects see their precise definitions,
    e.g. <code class="filename">/usr/lib/systemd/portable/profile/default/service.conf</code> and similar.</p></div><div class="refsect1"><a name="id-1.10"></a><h2 id="Exit status">Exit status<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Exit%20status">¶</a></h2><p>On success, 0 is returned, a non-zero failure code otherwise.</p></div><div class="refsect1"><a name="id-1.11"></a><h2 id="Environment">Environment<a class="headerlink" title="Permalink to this headline" href="portablectl.html#Environment">¶</a></h2><div class="variablelist"><dl class="variablelist"><dt id="$SYSTEMD_LOG_LEVEL"><span class="term"><code class="varname">$SYSTEMD_LOG_LEVEL</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LOG_LEVEL">¶</a></dt><dd><p><a name="log-level-body"></a>The maximum log level of emitted messages (messages with a higher
      log level, i.e. less important ones, will be suppressed). Either one of (in order of decreasing
      importance) <code class="constant">emerg</code>, <code class="constant">alert</code>, <code class="constant">crit</code>,
      <code class="constant">err</code>, <code class="constant">warning</code>, <code class="constant">notice</code>,
      <code class="constant">info</code>, <code class="constant">debug</code>, or an integer in the range 0…7. See
      <a href="http://man7.org/linux/man-pages/man3/syslog.3.html"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>
      for more information.</p></dd><dt id="$SYSTEMD_LOG_COLOR"><span class="term"><code class="varname">$SYSTEMD_LOG_COLOR</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LOG_COLOR">¶</a></dt><dd><p><a name="log-color-body"></a>A boolean. If true, messages written to the tty will be colored
      according to priority.</p><p>This setting is only useful when messages are written directly to the terminal, because
      <a href="journalctl.html#"><span class="citerefentry"><span class="refentrytitle">journalctl</span>(1)</span></a> and
      other tools that display logs will color messages based on the log level on their own.</p></dd><dt id="$SYSTEMD_LOG_TIME"><span class="term"><code class="varname">$SYSTEMD_LOG_TIME</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LOG_TIME">¶</a></dt><dd><p><a name="log-time-body"></a>A boolean. If true, console log messages will be prefixed with a
      timestamp.</p><p>This setting is only useful when messages are written directly to the terminal or a file, because
      <a href="journalctl.html#"><span class="citerefentry"><span class="refentrytitle">journalctl</span>(1)</span></a> and
      other tools that display logs will attach timestamps based on the entry metadata on their own.</p></dd><dt id="$SYSTEMD_LOG_LOCATION"><span class="term"><code class="varname">$SYSTEMD_LOG_LOCATION</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LOG_LOCATION">¶</a></dt><dd><p><a name="log-location-body"></a>A boolean. If true, messages will be prefixed with a filename
      and line number in the source code where the message originates.</p><p>Note that the log location is often attached as metadata to journal entries anyway. Including it
      directly in the message text can nevertheless be convenient when debugging programs.</p></dd><dt id="$SYSTEMD_LOG_TID"><span class="term"><code class="varname">$SYSTEMD_LOG_TID</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LOG_TID">¶</a></dt><dd><p><a name="log-tid-body"></a>A boolean. If true, messages will be prefixed with the current
      numerical thread ID (TID).</p><p>Note that the this information is attached as metadata to journal entries anyway. Including it
      directly in the message text can nevertheless be convenient when debugging programs.</p></dd><dt id="$SYSTEMD_LOG_TARGET"><span class="term"><code class="varname">$SYSTEMD_LOG_TARGET</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LOG_TARGET">¶</a></dt><dd><p><a name="log-target-body"></a>The destination for log messages. One of
      <code class="constant">console</code> (log to the attached tty), <code class="constant">console-prefixed</code> (log to
      the attached tty but with prefixes encoding the log level and "facility", see <a href="http://man7.org/linux/man-pages/man3/syslog.3.html"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>,
      <code class="constant">kmsg</code> (log to the kernel circular log buffer), <code class="constant">journal</code> (log to
      the journal), <code class="constant">journal-or-kmsg</code> (log to the journal if available, and to kmsg
      otherwise), <code class="constant">auto</code> (determine the appropriate log target automatically, the default),
      <code class="constant">null</code> (disable log output).</p></dd><dt id="$SYSTEMD_PAGER"><span class="term"><code class="varname">$SYSTEMD_PAGER</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_PAGER">¶</a></dt><dd><p>Pager to use when <code class="option">--no-pager</code> is not given; overrides
      <code class="varname">$PAGER</code>. If neither <code class="varname">$SYSTEMD_PAGER</code> nor <code class="varname">$PAGER</code> are set, a
      set of well-known pager implementations are tried in turn, including
      <a href="http://man7.org/linux/man-pages/man1/less.1.html"><span class="citerefentry"><span class="refentrytitle">less</span>(1)</span></a> and
      <a href="http://man7.org/linux/man-pages/man1/more.1.html"><span class="citerefentry"><span class="refentrytitle">more</span>(1)</span></a>, until one is found. If
      no pager implementation is discovered no pager is invoked. Setting this environment variable to an empty string
      or the value "<code class="literal">cat</code>" is equivalent to passing <code class="option">--no-pager</code>.</p></dd><dt id="$SYSTEMD_LESS"><span class="term"><code class="varname">$SYSTEMD_LESS</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LESS">¶</a></dt><dd><p>Override the options passed to <span class="command"><strong>less</strong></span> (by default
      "<code class="literal">FRSXMK</code>").</p><p>Users might want to change two options in particular:</p><div class="variablelist"><dl class="variablelist"><dt id="K"><span class="term"><code class="option">K</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#K">¶</a></dt><dd></dd><dt id="X"><span class="term"><code class="option">X</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#X">¶</a></dt><dd></dd></dl></div><p>See
      <a href="http://man7.org/linux/man-pages/man1/less.1.html"><span class="citerefentry"><span class="refentrytitle">less</span>(1)</span></a>
      for more discussion.</p></dd><dt id="$SYSTEMD_LESSCHARSET"><span class="term"><code class="varname">$SYSTEMD_LESSCHARSET</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_LESSCHARSET">¶</a></dt><dd><p>Override the charset passed to <span class="command"><strong>less</strong></span> (by default "<code class="literal">utf-8</code>", if
      the invoking terminal is determined to be UTF-8 compatible).</p></dd><dt id="$SYSTEMD_PAGERSECURE"><span class="term"><code class="varname">$SYSTEMD_PAGERSECURE</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_PAGERSECURE">¶</a></dt><dd><p>Takes a boolean argument. When true, the "secure" mode of the pager is enabled; if
      false, disabled. If <code class="varname">$SYSTEMD_PAGERSECURE</code> is not set at all, secure mode is enabled
      if the effective UID is not the same as the owner of the login session, see
      <a href="http://man7.org/linux/man-pages/man2/geteuid.2.html"><span class="citerefentry"><span class="refentrytitle">geteuid</span>(2)</span></a>
      and <a href="sd_pid_get_owner_uid.html#"><span class="citerefentry"><span class="refentrytitle">sd_pid_get_owner_uid</span>(3)</span></a>.
      In secure mode, <code class="option">LESSSECURE=1</code> will be set when invoking the pager, and the pager shall
      disable commands that open or create new files or start new subprocesses. When
      <code class="varname">$SYSTEMD_PAGERSECURE</code> is not set at all, pagers which are not known to implement
      secure mode will not be used. (Currently only
      <a href="http://man7.org/linux/man-pages/man1/less.1.html"><span class="citerefentry"><span class="refentrytitle">less</span>(1)</span></a>
      implements secure mode.)</p><p>Note: when commands are invoked with elevated privileges, for example under <a href="http://man7.org/linux/man-pages/man8/sudo.8.html"><span class="citerefentry"><span class="refentrytitle">sudo</span>(8)</span></a> or
      <a href="http://linux.die.net/man/1/pkexec"><span class="citerefentry"><span class="refentrytitle">pkexec</span>(1)</span></a>, care
      must be taken to ensure that unintended interactive features are not enabled. "Secure" mode for the
      pager may be enabled automatically as describe above. Setting <code class="varname">SYSTEMD_PAGERSECURE=0</code>
      or not removing it from the inherited environment allows the user to invoke arbitrary commands. Note
      that if the <code class="varname">$SYSTEMD_PAGER</code> or <code class="varname">$PAGER</code> variables are to be
      honoured, <code class="varname">$SYSTEMD_PAGERSECURE</code> must be set too. It might be reasonable to completely
      disable the pager using <code class="option">--no-pager</code> instead.</p></dd><dt id="$SYSTEMD_COLORS"><span class="term"><code class="varname">$SYSTEMD_COLORS</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_COLORS">¶</a></dt><dd><p>Takes a boolean argument. When true, <span class="command"><strong>systemd</strong></span> and related utilities
      will use colors in their output, otherwise the output will be monochrome. Additionally, the variable can
      take one of the following special values: "<code class="literal">16</code>", "<code class="literal">256</code>" to restrict the use
      of colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic
      decision based on <code class="varname">$TERM</code> and what the console is connected to.</p></dd><dt id="$SYSTEMD_URLIFY"><span class="term"><code class="varname">$SYSTEMD_URLIFY</code></span><a class="headerlink" title="Permalink to this term" href="portablectl.html#%24SYSTEMD_URLIFY">¶</a></dt><dd><p>The value must be a boolean. Controls whether clickable links should be generated in
      the output for terminal emulators supporting this. This can be specified to override the decision that
      <span class="command"><strong>systemd</strong></span> makes based on <code class="varname">$TERM</code> and other conditions.</p></dd></dl></div></div><div class="refsect1"><a name="id-1.12"></a><h2 id="See Also">See Also<a class="headerlink" title="Permalink to this headline" href="portablectl.html#See%20Also">¶</a></h2><p>
      <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a>,
      <a href="org.freedesktop.portable1.html#"><span class="citerefentry"><span class="refentrytitle">org.freedesktop.portable1</span>(5)</span></a>,
      <a href="systemd-portabled.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd-portabled.service</span>(8)</span></a>
    </p></div></div></body></html>

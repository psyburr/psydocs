<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd.unit</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html">Index </a>·
  <a href="systemd.directives.html">Directives </a><span style="float:right">systemd 249</span><hr><div class="refentry"><a name="systemd.unit"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>systemd.unit — Unit configuration</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><p><code class="filename"><em class="replaceable"><code>service</code></em>.service</code>,
    <code class="filename"><em class="replaceable"><code>socket</code></em>.socket</code>,
    <code class="filename"><em class="replaceable"><code>device</code></em>.device</code>,
    <code class="filename"><em class="replaceable"><code>mount</code></em>.mount</code>,
    <code class="filename"><em class="replaceable"><code>automount</code></em>.automount</code>,
    <code class="filename"><em class="replaceable"><code>swap</code></em>.swap</code>,
    <code class="filename"><em class="replaceable"><code>target</code></em>.target</code>,
    <code class="filename"><em class="replaceable"><code>path</code></em>.path</code>,
    <code class="filename"><em class="replaceable"><code>timer</code></em>.timer</code>,
    <code class="filename"><em class="replaceable"><code>slice</code></em>.slice</code>,
    <code class="filename"><em class="replaceable"><code>scope</code></em>.scope</code></p><div class="refsect2"><a name="id-1.4.2"></a><h3 id="System Unit Search Path">System Unit Search Path<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#System%20Unit%20Search%20Path">¶</a></h3><div class="literallayout"><p><code class="filename">/etc/systemd/system.control/*</code><br>
<code class="filename">/run/systemd/system.control/*</code><br>
<code class="filename">/run/systemd/transient/*</code><br>
<code class="filename">/run/systemd/generator.early/*</code><br>
<code class="filename">/etc/systemd/system/*</code><br>
<code class="filename">/etc/systemd/system.attached/*</code><br>
<code class="filename">/run/systemd/system/*</code><br>
<code class="filename">/run/systemd/system.attached/*</code><br>
<code class="filename">/run/systemd/generator/*</code><br>
<code class="filename">…</code><br>
<code class="filename">/usr/lib/systemd/system/*</code><br>
<code class="filename">/run/systemd/generator.late/*</code></p></div></div><div class="refsect2"><a name="id-1.4.3"></a><h3 id="User Unit Search Path">User Unit Search Path<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#User%20Unit%20Search%20Path">¶</a></h3><div class="literallayout"><p><code class="filename">~/.config/systemd/user.control/*</code><br>
<code class="filename">$XDG_RUNTIME_DIR/systemd/user.control/*</code><br>
<code class="filename">$XDG_RUNTIME_DIR/systemd/transient/*</code><br>
<code class="filename">$XDG_RUNTIME_DIR/systemd/generator.early/*</code><br>
<code class="filename">~/.config/systemd/user/*</code><br>
<code class="filename">$XDG_CONFIG_DIRS/systemd/user/*</code><br>
<code class="filename">/etc/systemd/user/*</code><br>
<code class="filename">$XDG_RUNTIME_DIR/systemd/user/*</code><br>
<code class="filename">/run/systemd/user/*</code><br>
<code class="filename">$XDG_RUNTIME_DIR/systemd/generator/*</code><br>
<code class="filename">$XDG_DATA_HOME/systemd/user/*</code><br>
<code class="filename">$XDG_DATA_DIRS/systemd/user/*</code><br>
<code class="filename">…</code><br>
<code class="filename">/usr/lib/systemd/user/*</code><br>
<code class="filename">$XDG_RUNTIME_DIR/systemd/generator.late/*</code></p></div></div></div><div class="refsect1"><a name="id-1.5"></a><h2 id="Description">Description<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Description">¶</a></h2><p>A unit file is a plain text ini-style file that encodes information about a service, a
    socket, a device, a mount point, an automount point, a swap file or partition, a start-up
    target, a watched file system path, a timer controlled and supervised by
    <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a>, a
    resource management slice or a group of externally created processes. See
    <a href="systemd.syntax.html#"><span class="citerefentry"><span class="refentrytitle">systemd.syntax</span>(7)</span></a>
    for a general description of the syntax.</p><p>This man page lists the common configuration options of all
    the unit types. These options need to be configured in the [Unit]
    or [Install] sections of the unit files.</p><p>In addition to the generic [Unit] and [Install] sections
    described here, each unit may have a type-specific section, e.g.
    [Service] for a service unit. See the respective man pages for
    more information:
    <a href="systemd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd.service</span>(5)</span></a>,
    <a href="systemd.socket.html#"><span class="citerefentry"><span class="refentrytitle">systemd.socket</span>(5)</span></a>,
    <a href="systemd.device.html#"><span class="citerefentry"><span class="refentrytitle">systemd.device</span>(5)</span></a>,
    <a href="systemd.mount.html#"><span class="citerefentry"><span class="refentrytitle">systemd.mount</span>(5)</span></a>,
    <a href="systemd.automount.html#"><span class="citerefentry"><span class="refentrytitle">systemd.automount</span>(5)</span></a>,
    <a href="systemd.swap.html#"><span class="citerefentry"><span class="refentrytitle">systemd.swap</span>(5)</span></a>,
    <a href="systemd.target.html#"><span class="citerefentry"><span class="refentrytitle">systemd.target</span>(5)</span></a>,
    <a href="systemd.path.html#"><span class="citerefentry"><span class="refentrytitle">systemd.path</span>(5)</span></a>,
    <a href="systemd.timer.html#"><span class="citerefentry"><span class="refentrytitle">systemd.timer</span>(5)</span></a>,
    <a href="systemd.slice.html#"><span class="citerefentry"><span class="refentrytitle">systemd.slice</span>(5)</span></a>,
    <a href="systemd.scope.html#"><span class="citerefentry"><span class="refentrytitle">systemd.scope</span>(5)</span></a>.
    </p><p>Unit files are loaded from a set of paths determined during compilation, described in the next
    section.</p><p>Valid unit names consist of a "name prefix" and a dot and a suffix specifying the unit type. The
    "unit prefix" must consist of one or more valid characters (ASCII letters, digits, "<code class="literal">:</code>",
    "<code class="literal">-</code>", "<code class="literal">_</code>", "<code class="literal">.</code>", and "<code class="literal">\</code>"). The total
    length of the unit name including the suffix must not exceed 256 characters. The type suffix must be one
    of "<code class="literal">.service</code>", "<code class="literal">.socket</code>", "<code class="literal">.device</code>",
    "<code class="literal">.mount</code>", "<code class="literal">.automount</code>", "<code class="literal">.swap</code>",
    "<code class="literal">.target</code>", "<code class="literal">.path</code>", "<code class="literal">.timer</code>",
    "<code class="literal">.slice</code>", or "<code class="literal">.scope</code>".</p><p>Units names can be parameterized by a single argument called the "instance name". The unit is then
    constructed based on a "template file" which serves as the definition of multiple services or other
    units. A template unit must have a single "<code class="literal">@</code>" at the end of the name (right before the
    type suffix). The name of the full unit is formed by inserting the instance name between
    "<code class="literal">@</code>" and the unit type suffix. In the unit file itself, the instance parameter may be
    referred to using "<code class="literal">%i</code>" and other specifiers, see below.</p><p>Unit files may contain additional options on top of those
    listed here. If systemd encounters an unknown option, it will
    write a warning log message but continue loading the unit. If an
    option or section name is prefixed with <code class="option">X-</code>, it is
    ignored completely by systemd. Options within an ignored section
    do not need the prefix. Applications may use this to include
    additional information in the unit files.</p><p>Units can be aliased (have an alternative name), by creating a symlink from the new name to the
    existing name in one of the unit search paths. For example, <code class="filename">systemd-networkd.service</code>
    has the alias <code class="filename">dbus-org.freedesktop.network1.service</code>, created during installation as
    a symlink, so when <span class="command"><strong>systemd</strong></span> is asked through D-Bus to load
    <code class="filename">dbus-org.freedesktop.network1.service</code>, it'll load
    <code class="filename">systemd-networkd.service</code>. As another example, <code class="filename">default.target</code> —
    the default system target started at boot — is commonly symlinked (aliased) to either
    <code class="filename">multi-user.target</code> or <code class="filename">graphical.target</code> to select what is started
    by default. Alias names may be used in commands like <span class="command"><strong>disable</strong></span>,
    <span class="command"><strong>start</strong></span>, <span class="command"><strong>stop</strong></span>, <span class="command"><strong>status</strong></span>, and similar, and in all
    unit dependency directives, including <code class="varname">Wants=</code>, <code class="varname">Requires=</code>,
    <code class="varname">Before=</code>, <code class="varname">After=</code>. Aliases cannot be used with the
    <span class="command"><strong>preset</strong></span> command.</p><p>Aliases obey the following restrictions: a unit of a certain type ("<code class="literal">.service</code>",
    "<code class="literal">.socket</code>", …) can only be aliased by a name with the same type suffix. A plain unit (not
    a template or an instance), may only be aliased by a plain name. A template instance may only be aliased
    by another template instance, and the instance part must be identical. A template may be aliased by
    another template (in which case the alias applies to all instances of the template). As a special case, a
    template instance (e.g. "<code class="literal">alias@inst.service</code>") may be a symlink to different template
    (e.g. "<code class="literal">template@inst.service</code>"). In that case, just this specific instance is aliased,
    while other instances of the template (e.g. "<code class="literal">alias@foo.service</code>",
    "<code class="literal">alias@bar.service</code>") are not aliased. Those rule preserve the requirement that the
    instance (if any) is always uniquely defined for a given unit and all its aliases.</p><p>Unit files may specify aliases through the <code class="varname">Alias=</code> directive in the [Install]
    section. When the unit is enabled, symlinks will be created for those names, and removed when the unit is
    disabled. For example, <code class="filename">reboot.target</code> specifies
    <code class="varname">Alias=ctrl-alt-del.target</code>, so when enabled, the symlink
    <code class="filename">/etc/systemd/system/ctrl-alt-del.service</code> pointing to the
    <code class="filename">reboot.target</code> file will be created, and when
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Del</strong></span> is invoked,
    <span class="command"><strong>systemd</strong></span> will look for the <code class="filename">ctrl-alt-del.service</code> and execute
    <code class="filename">reboot.service</code>. <span class="command"><strong>systemd</strong></span> does not look at the [Install] section at
    all during normal operation, so any directives in that section only have an effect through the symlinks
    created during enablement.</p><p>Along with a unit file <code class="filename">foo.service</code>, the directory
    <code class="filename">foo.service.wants/</code> may exist. All unit files symlinked from such a directory are
    implicitly added as dependencies of type <code class="varname">Wants=</code> to the unit. Similar functionality
    exists for <code class="varname">Requires=</code> type dependencies as well, the directory suffix is
    <code class="filename">.requires/</code> in this case. This functionality is useful to hook units into the
    start-up of other units, without having to modify their unit files. For details about the semantics of
    <code class="varname">Wants=</code>, see below. The preferred way to create symlinks in the
    <code class="filename">.wants/</code> or <code class="filename">.requires/</code> directory of a unit file is by embedding
    the dependency in [Install] section of the target unit, and creating the symlink in the file system with
    the <span class="command"><strong>enable</strong></span> or <span class="command"><strong>preset</strong></span> commands of
    <a href="systemctl.html#"><span class="citerefentry"><span class="refentrytitle">systemctl</span>(1)</span></a>.</p><p>Along with a unit file <code class="filename">foo.service</code>, a "drop-in" directory
    <code class="filename">foo.service.d/</code> may exist. All files with the suffix
    "<code class="literal">.conf</code>" from this directory will be merged in the alphanumeric order and parsed
    after the main unit file itself has been parsed. This is useful to alter or add configuration
    settings for a unit, without having to modify unit files. Each drop-in file must contain appropriate
    section headers. For instantiated units, this logic will first look for the instance
    "<code class="literal">.d/</code>" subdirectory (e.g. "<code class="literal">foo@bar.service.d/</code>") and read its
    "<code class="literal">.conf</code>" files, followed by the template "<code class="literal">.d/</code>" subdirectory (e.g.
    "<code class="literal">foo@.service.d/</code>") and the "<code class="literal">.conf</code>" files there. Moreover for unit
    names containing dashes ("<code class="literal">-</code>"), the set of directories generated by repeatedly
    truncating the unit name after all dashes is searched too. Specifically, for a unit name
    <code class="filename">foo-bar-baz.service</code> not only the regular drop-in directory
    <code class="filename">foo-bar-baz.service.d/</code> is searched but also both <code class="filename">foo-bar-.service.d/</code> and
    <code class="filename">foo-.service.d/</code>. This is useful for defining common drop-ins for a set of related units, whose
    names begin with a common prefix. This scheme is particularly useful for mount, automount and slice units, whose
    systematic naming structure is built around dashes as component separators. Note that equally named drop-in files
    further down the prefix hierarchy override those further up,
    i.e. <code class="filename">foo-bar-.service.d/10-override.conf</code> overrides
    <code class="filename">foo-.service.d/10-override.conf</code>.</p><p>In cases of unit aliases (described above), dropins for the aliased name and all aliases are
    loaded. In the example of <code class="filename">default.target</code> aliasing
    <code class="filename">graphical.target</code>, <code class="filename">default.target.d/</code>,
    <code class="filename">default.target.wants/</code>, <code class="filename">default.target.requires/</code>,
    <code class="filename">graphical.target.d/</code>, <code class="filename">graphical.target.wants/</code>,
    <code class="filename">graphical.target.requires/</code> would all be read. For templates, dropins for the
    template, any template aliases, the template instance, and all alias instances are read. When just a
    specific template instance is aliased, then the dropins for the target template, the target template
    instance, and the alias template instance are read.</p><p>In addition to <code class="filename">/etc/systemd/system</code>, the drop-in "<code class="literal">.d/</code>"
    directories for system services can be placed in <code class="filename">/usr/lib/systemd/system</code> or
    <code class="filename">/run/systemd/system</code> directories. Drop-in files in <code class="filename">/etc/</code>
    take precedence over those in <code class="filename">/run/</code> which in turn take precedence over those
    in <code class="filename">/usr/lib/</code>. Drop-in files under any of these directories take precedence
    over unit files wherever located. Multiple drop-in files with different names are applied in
    lexicographic order, regardless of which of the directories they reside in.</p><p>Units also support a top-level drop-in with <code class="filename"><em class="replaceable"><code>type</code></em>.d/</code>,
    where <em class="replaceable"><code>type</code></em> may be e.g. "<code class="literal">service</code>" or "<code class="literal">socket</code>",
    that allows altering or adding to the settings of all corresponding unit files on the system.
    The formatting and precedence of applying drop-in configurations follow what is defined above.
    Files in <code class="filename"><em class="replaceable"><code>type</code></em>.d/</code> have lower precedence compared
    to files in name-specific override directories. The usual rules apply: multiple drop-in files
    with different names are applied in lexicographic order, regardless of which of the directories
    they reside in, so a file in <code class="filename"><em class="replaceable"><code>type</code></em>.d/</code> applies
    to a unit only if there are no drop-ins or masks with that name in directories with higher
    precedence. See Examples.</p><p>Note that while systemd offers a flexible dependency system
    between units it is recommended to use this functionality only
    sparingly and instead rely on techniques such as bus-based or
    socket-based activation which make dependencies implicit,
    resulting in a both simpler and more flexible system.</p><p>As mentioned above, a unit may be instantiated from a template file. This allows creation
    of multiple units from a single configuration file. If systemd looks for a unit configuration
    file, it will first search for the literal unit name in the file system. If that yields no
    success and the unit name contains an "<code class="literal">@</code>" character, systemd will look for a
    unit template that shares the same name but with the instance string (i.e. the part between the
    "<code class="literal">@</code>" character and the suffix) removed. Example: if a service
    <code class="filename">getty@tty3.service</code> is requested and no file by that name is found, systemd
    will look for <code class="filename">getty@.service</code> and instantiate a service from that
    configuration file if it is found.</p><p>To refer to the instance string from within the
    configuration file you may use the special "<code class="literal">%i</code>"
    specifier in many of the configuration options. See below for
    details.</p><p>If a unit file is empty (i.e. has the file size 0) or is
    symlinked to <code class="filename">/dev/null</code>, its configuration
    will not be loaded and it appears with a load state of
    "<code class="literal">masked</code>", and cannot be activated. Use this as an
    effective way to fully disable a unit, making it impossible to
    start it even manually.</p><p>The unit file format is covered by the
    <a class="ulink" href="https://systemd.io/PORTABILITY_AND_STABILITY/" target="_top">Interface
    Portability and Stability Promise</a>.</p></div><div class="refsect1"><a name="id-1.6"></a><h2 id="String Escaping for Inclusion in Unit Names">String Escaping for Inclusion in Unit Names<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#String%20Escaping%20for%20Inclusion%20in%20Unit%20Names">¶</a></h2><p>Sometimes it is useful to convert arbitrary strings into unit names. To facilitate this, a method of string
    escaping is used, in order to map strings containing arbitrary byte values (except <code class="constant">NUL</code>) into
    valid unit names and their restricted character set. A common special case are unit names that reflect paths to
    objects in the file system hierarchy. Example: a device unit <code class="filename">dev-sda.device</code> refers to a device
    with the device node <code class="filename">/dev/sda</code> in the file system.</p><p>The escaping algorithm operates as follows: given a string, any "<code class="literal">/</code>" character is
    replaced by "<code class="literal">-</code>", and all other characters which are not ASCII alphanumerics,
    "<code class="literal">:</code>", "<code class="literal">_</code>" or "<code class="literal">.</code>" are replaced by C-style
    "<code class="literal">\x2d</code>" escapes. In addition, "<code class="literal">.</code>" is replaced with such a C-style escape
    when it would appear as the first character in the escaped string.</p><p>When the input qualifies as absolute file system path, this algorithm is extended slightly: the path to the
    root directory "<code class="literal">/</code>" is encoded as single dash "<code class="literal">-</code>". In addition, any leading,
    trailing or duplicate "<code class="literal">/</code>" characters are removed from the string before transformation. Example:
    <code class="filename">/foo//bar/baz/</code> becomes "<code class="literal">foo-bar-baz</code>".</p><p>This escaping is fully reversible, as long as it is known whether the escaped string was a path (the
    unescaping results are different for paths and non-path strings). The
    <a href="systemd-escape.html#"><span class="citerefentry"><span class="refentrytitle">systemd-escape</span>(1)</span></a> command may be
    used to apply and reverse escaping on arbitrary strings. Use <span class="command"><strong>systemd-escape --path</strong></span> to escape
    path strings, and <span class="command"><strong>systemd-escape</strong></span> without <code class="option">--path</code> otherwise.</p></div><div class="refsect1"><a name="id-1.7"></a><h2 id="Automatic dependencies">Automatic dependencies<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Automatic%20dependencies">¶</a></h2><div class="refsect2"><a name="id-1.7.2"></a><h3 id="Implicit Dependencies">Implicit Dependencies<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Implicit%20Dependencies">¶</a></h3><p>A number of unit dependencies are implicitly established, depending on unit type and
      unit configuration. These implicit dependencies can make unit configuration file cleaner. For
      the implicit dependencies in each unit type, please refer to section "Implicit Dependencies"
      in respective man pages.</p><p>For example, service units with <code class="varname">Type=dbus</code> automatically acquire
      dependencies of type <code class="varname">Requires=</code> and <code class="varname">After=</code> on
      <code class="filename">dbus.socket</code>. See
      <a href="systemd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd.service</span>(5)</span></a>
      for details.</p></div><div class="refsect2"><a name="id-1.7.3"></a><h3 id="Default Dependencies">Default Dependencies<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Default%20Dependencies">¶</a></h3><p>Default dependencies are similar to implicit dependencies, but can be turned on and off
      by setting <code class="varname">DefaultDependencies=</code> to <code class="varname">yes</code> (the default) and
      <code class="varname">no</code>, while implicit dependencies are always in effect. See section "Default
      Dependencies" in respective man pages for the effect of enabling
      <code class="varname">DefaultDependencies=</code> in each unit types.</p><p>For example, target units will complement all configured dependencies of type
      <code class="varname">Wants=</code> or <code class="varname">Requires=</code> with dependencies of type
      <code class="varname">After=</code> unless <code class="varname">DefaultDependencies=no</code> is set in the
      specified units. See
      <a href="systemd.target.html#"><span class="citerefentry"><span class="refentrytitle">systemd.target</span>(5)</span></a>
      for details. Note that this behavior can be turned off by setting
      <code class="varname">DefaultDependencies=no</code>.</p></div></div><div class="refsect1"><a name="id-1.8"></a><h2 id="Unit File Load Path">Unit File Load Path<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Unit%20File%20Load%20Path">¶</a></h2><p>Unit files are loaded from a set of paths determined during
    compilation, described in the two tables below. Unit files found
    in directories listed earlier override files with the same name in
    directories lower in the list.</p><p>When the variable <code class="varname">$SYSTEMD_UNIT_PATH</code> is set,
    the contents of this variable overrides the unit load path. If
    <code class="varname">$SYSTEMD_UNIT_PATH</code> ends with an empty component
    ("<code class="literal">:</code>"), the usual unit load path will be appended
    to the contents of the variable.</p><div class="table"><a name="id-1.8.4"></a><p class="title"><b>Table 1. 
        Load path when running in system mode (<code class="option">--system</code>).
      </b></p><div class="table-contents"><table class="table" summary="
        Load path when running in system mode (--system).
      " border="1"><colgroup><col class="path"><col class="expl"></colgroup><thead><tr><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="filename">/etc/systemd/system.control</code></td><td rowspan="2">Persistent and transient configuration created using the dbus API</td></tr><tr><td><code class="filename">/run/systemd/system.control</code></td></tr><tr><td><code class="filename">/run/systemd/transient</code></td><td>Dynamic configuration for transient units</td></tr><tr><td><code class="filename">/run/systemd/generator.early</code></td><td>Generated units with high priority (see <em class="replaceable"><code>early-dir</code></em> in <a href="systemd.generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.generator</span>(7)</span></a>)</td></tr><tr><td><code class="filename">/etc/systemd/system</code></td><td>System units created by the administrator</td></tr><tr><td><code class="filename">/run/systemd/system</code></td><td>Runtime units</td></tr><tr><td><code class="filename">/run/systemd/generator</code></td><td>Generated units with medium priority (see <em class="replaceable"><code>normal-dir</code></em> in <a href="systemd.generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.generator</span>(7)</span></a>)</td></tr><tr><td><code class="filename">/usr/local/lib/systemd/system</code></td><td>System units installed by the administrator </td></tr><tr><td><code class="filename">/usr/lib/systemd/system</code></td><td>System units installed by the distribution package manager</td></tr><tr><td><code class="filename">/run/systemd/generator.late</code></td><td>Generated units with low priority (see <em class="replaceable"><code>late-dir</code></em> in <a href="systemd.generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.generator</span>(7)</span></a>)</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id-1.8.5"></a><p class="title"><b>Table 2. 
        Load path when running in user mode (<code class="option">--user</code>).
      </b></p><div class="table-contents"><table class="table" summary="
        Load path when running in user mode (--user).
      " border="1"><colgroup><col class="path"><col class="expl"></colgroup><thead><tr><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="filename">$XDG_CONFIG_HOME/systemd/user.control</code> or <code class="filename">~/.config/systemd/user.control</code></td><td rowspan="2">Persistent and transient configuration created using the dbus API (<code class="varname">$XDG_CONFIG_HOME</code> is used if set, <code class="filename">~/.config</code> otherwise)</td></tr><tr><td><code class="filename">$XDG_RUNTIME_DIR/systemd/user.control</code></td></tr><tr><td><code class="filename">/run/systemd/transient</code></td><td>Dynamic configuration for transient units</td></tr><tr><td><code class="filename">/run/systemd/generator.early</code></td><td>Generated units with high priority (see <em class="replaceable"><code>early-dir</code></em> in <a href="systemd.generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.generator</span>(7)</span></a>)</td></tr><tr><td><code class="filename">$XDG_CONFIG_HOME/systemd/user</code> or <code class="filename">$HOME/.config/systemd/user</code></td><td>User configuration (<code class="varname">$XDG_CONFIG_HOME</code> is used if set, <code class="filename">~/.config</code> otherwise)</td></tr><tr><td><code class="filename">$XDG_CONFIG_DIRS/systemd/user</code> or <code class="filename">/etc/xdg/systemd/user</code></td><td>Additional configuration directories as specified by the XDG base directory specification (<code class="varname">$XDG_CONFIG_DIRS</code> is used if set, <code class="filename">/etc/xdg</code> otherwise)</td></tr><tr><td><code class="filename">/etc/systemd/user</code></td><td>User units created by the administrator</td></tr><tr><td><code class="filename">$XDG_RUNTIME_DIR/systemd/user</code></td><td>Runtime units (only used when $XDG_RUNTIME_DIR is set)</td></tr><tr><td><code class="filename">/run/systemd/user</code></td><td>Runtime units</td></tr><tr><td><code class="filename">$XDG_RUNTIME_DIR/systemd/generator</code></td><td>Generated units with medium priority (see <em class="replaceable"><code>normal-dir</code></em> in <a href="systemd.generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.generator</span>(7)</span></a>)</td></tr><tr><td><code class="filename">$XDG_DATA_HOME/systemd/user</code> or <code class="filename">$HOME/.local/share/systemd/user</code></td><td>Units of packages that have been installed in the home directory (<code class="varname">$XDG_DATA_HOME</code> is used if set, <code class="filename">~/.local/share</code> otherwise)</td></tr><tr><td><code class="filename">$XDG_DATA_DIRS/systemd/user</code> or <code class="filename">/usr/local/share/systemd/user</code> and <code class="filename">/usr/share/systemd/user</code></td><td>Additional data directories as specified by the XDG base directory specification (<code class="varname">$XDG_DATA_DIRS</code> is used if set, <code class="filename">/usr/local/share</code> and <code class="filename">/usr/share</code> otherwise)</td></tr><tr><td><code class="filename">$dir/systemd/user</code> for each <code class="varname">$dir</code> in <code class="varname">$XDG_DATA_DIRS</code></td><td>Additional locations for installed user units, one for each entry in <code class="varname">$XDG_DATA_DIRS</code></td></tr><tr><td><code class="filename">/usr/local/lib/systemd/user</code></td><td>User units installed by the administrator</td></tr><tr><td><code class="filename">/usr/lib/systemd/user</code></td><td>User units installed by the distribution package manager</td></tr><tr><td><code class="filename">$XDG_RUNTIME_DIR/systemd/generator.late</code></td><td>Generated units with low priority (see <em class="replaceable"><code>late-dir</code></em> in <a href="systemd.generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.generator</span>(7)</span></a>)</td></tr></tbody></table></div></div><br class="table-break"><p>The set of load paths for the user manager instance may be augmented or
    changed using various environment variables. And environment variables may in
    turn be set using environment generators, see
    <a href="systemd.environment-generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd.environment-generator</span>(7)</span></a>.
    In particular, <code class="varname">$XDG_DATA_HOME</code> and
    <code class="varname">$XDG_DATA_DIRS</code> may be easily set using
    <a href="systemd-environment-d-generator.html#"><span class="citerefentry"><span class="refentrytitle">systemd-environment-d-generator</span>(8)</span></a>.
    Thus, directories listed here are just the defaults. To see the actual list that
    would be used based on compilation options and current environment use
    </p><pre class="programlisting">systemd-analyze --user unit-paths</pre><p>
    </p><p>Moreover, additional units might be loaded into systemd from
    directories not on the unit load path by creating a symlink pointing to a
    unit file in the directories. You can use <span class="command"><strong>systemctl link</strong></span>
    for this operation. See
    <a href="systemctl.html#"><span class="citerefentry"><span class="refentrytitle">systemctl</span>(1)</span></a>
    for its usage and precaution.
    </p></div><div class="refsect1"><a name="id-1.9"></a><h2 id="Unit Garbage Collection">Unit Garbage Collection<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Unit%20Garbage%20Collection">¶</a></h2><p>The system and service manager loads a unit's configuration automatically when a unit is referenced for the
    first time. It will automatically unload the unit configuration and state again when the unit is not needed anymore
    ("garbage collection"). A unit may be referenced through a number of different mechanisms:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Another loaded unit references it with a dependency such as <code class="varname">After=</code>,
      <code class="varname">Wants=</code>, …</p></li><li class="listitem"><p>The unit is currently starting, running, reloading or stopping.</p></li><li class="listitem"><p>The unit is currently in the <code class="constant">failed</code> state. (But see below.)</p></li><li class="listitem"><p>A job for the unit is pending.</p></li><li class="listitem"><p>The unit is pinned by an active IPC client program.</p></li><li class="listitem"><p>The unit is a special "perpetual" unit that is always active and loaded. Examples for perpetual
      units are the root mount unit <code class="filename">-.mount</code> or the scope unit <code class="filename">init.scope</code> that
      the service manager itself lives in.</p></li><li class="listitem"><p>The unit has running processes associated with it.</p></li></ol></div><p>The garbage collection logic may be altered with the <code class="varname">CollectMode=</code> option, which allows
    configuration whether automatic unloading of units that are in <code class="constant">failed</code> state is permissible,
    see below.</p><p>Note that when a unit's configuration and state is unloaded, all execution results, such as exit codes, exit
    signals, resource consumption and other statistics are lost, except for what is stored in the log subsystem.</p><p>Use <span class="command"><strong>systemctl daemon-reload</strong></span> or an equivalent command to reload unit configuration while
    the unit is already loaded. In this case all configuration settings are flushed out and replaced with the new
    configuration (which however might not be in effect immediately), however all runtime state is
    saved/restored.</p></div><div class="refsect1"><a name="id-1.10"></a><h2 id="[Unit] Section Options">[Unit] Section Options<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#%5BUnit%5D%20Section%20Options">¶</a></h2><p>The unit file may include a [Unit] section, which carries
    generic information about the unit that is not dependent on the
    type of unit:</p><div class="variablelist"><dl class="variablelist"><dt id="Description="><span class="term"><code class="varname">Description=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Description=">¶</a></dt><dd><p>A short human readable title of the unit. This may be used by
        <span class="command"><strong>systemd</strong></span> (and other UIs) as a user-visible label for the unit, so this string
        should identify the unit rather than describe it, despite the name. This string also shouldn't just
        repeat the unit name. "<code class="literal">Apache2 Web Server</code>" is a good example. Bad examples are
        "<code class="literal">high-performance light-weight HTTP server</code>" (too generic) or
        "<code class="literal">Apache2</code>" (meaningless for people who do not know Apache, duplicates the unit
        name). <span class="command"><strong>systemd</strong></span> may use this string as a noun in status messages ("<code class="literal">Starting
        <em class="replaceable"><code>description</code></em>...</code>", "<code class="literal">Started
        <em class="replaceable"><code>description</code></em>.</code>", "<code class="literal">Reached target
        <em class="replaceable"><code>description</code></em>.</code>", "<code class="literal">Failed to start
        <em class="replaceable"><code>description</code></em>.</code>"), so it should be capitalized, and should not be a
        full sentence, or a phrase with a continuous verb. Bad examples include "<code class="literal">exiting the
        container</code>" or "<code class="literal">updating the database once per day.</code>".</p></dd><dt id="Documentation="><span class="term"><code class="varname">Documentation=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Documentation=">¶</a></dt><dd><p>A space-separated list of URIs referencing
        documentation for this unit or its configuration. Accepted are
        only URIs of the types "<code class="literal">http://</code>",
        "<code class="literal">https://</code>", "<code class="literal">file:</code>",
        "<code class="literal">info:</code>", "<code class="literal">man:</code>". For more
        information about the syntax of these URIs, see <a href="http://man7.org/linux/man-pages/man7/uri.7.html"><span class="citerefentry"><span class="refentrytitle">uri</span>(7)</span></a>.
        The URIs should be listed in order of relevance, starting with
        the most relevant. It is a good idea to first reference
        documentation that explains what the unit's purpose is,
        followed by how it is configured, followed by any other
        related documentation. This option may be specified more than
        once, in which case the specified list of URIs is merged. If
        the empty string is assigned to this option, the list is reset
        and all prior assignments will have no
        effect.</p></dd><dt id="Wants="><span class="term"><code class="varname">Wants=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Wants=">¶</a></dt><dd><p>Configures (weak) requirement dependencies on other units. This option may be
        specified more than once or multiple space-separated units may be specified in one option in which
        case dependencies for all listed names will be created. Dependencies of this type may also be
        configured outside of the unit configuration file by adding a symlink to a
        <code class="filename">.wants/</code> directory accompanying the unit file. For details, see above.</p><p>Units listed in this option will be started if the configuring unit is. However, if the listed
        units fail to start or cannot be added to the transaction, this has no impact on the validity of the
        transaction as a whole, and this unit will still be started. This is the recommended way to hook
        the start-up of one unit to the start-up of another unit.</p><p>Note that requirement dependencies do not influence the order in which services are started or
        stopped. This has to be configured independently with the <code class="varname">After=</code> or
        <code class="varname">Before=</code> options. If unit <code class="filename">foo.service</code> pulls in unit
        <code class="filename">bar.service</code> as configured with <code class="varname">Wants=</code> and no ordering is
        configured with <code class="varname">After=</code> or <code class="varname">Before=</code>, then both units will be
        started simultaneously and without any delay between them if <code class="filename">foo.service</code> is
        activated.</p></dd><dt id="Requires="><span class="term"><code class="varname">Requires=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Requires=">¶</a></dt><dd><p>Similar to <code class="varname">Wants=</code>, but declares a stronger requirement
        dependency. Dependencies of this type may also be configured by adding a symlink to a
        <code class="filename">.requires/</code> directory accompanying the unit file.</p><p>If this unit gets activated, the units listed will be activated as well. If one of
        the other units fails to activate, and an ordering dependency <code class="varname">After=</code> on the
        failing unit is set, this unit will not be started. Besides, with or without specifying
        <code class="varname">After=</code>, this unit will be stopped if one of the other units is explicitly
        stopped.</p><p>Often, it is a better choice to use <code class="varname">Wants=</code> instead of
        <code class="varname">Requires=</code> in order to achieve a system that is more robust when dealing with
        failing services.</p><p>Note that this dependency type does not imply that the other unit always has to be in active state when
        this unit is running. Specifically: failing condition checks (such as <code class="varname">ConditionPathExists=</code>,
        <code class="varname">ConditionPathIsSymbolicLink=</code>, … — see below) do not cause the start job of a unit with a
        <code class="varname">Requires=</code> dependency on it to fail. Also, some unit types may deactivate on their own (for
        example, a service process may decide to exit cleanly, or a device may be unplugged by the user), which is not
        propagated to units having a <code class="varname">Requires=</code> dependency. Use the <code class="varname">BindsTo=</code>
        dependency type together with <code class="varname">After=</code> to ensure that a unit may never be in active state
        without a specific other unit also in active state (see below).</p></dd><dt id="Requisite="><span class="term"><code class="varname">Requisite=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Requisite=">¶</a></dt><dd><p>Similar to <code class="varname">Requires=</code>. However, if the units listed here
        are not started already, they will not be started and the starting of this unit will fail
        immediately. <code class="varname">Requisite=</code> does not imply an ordering dependency, even if
        both units are started in the same transaction. Hence this setting should usually be
        combined with <code class="varname">After=</code>, to ensure this unit is not started before the other
        unit.</p><p>When <code class="varname">Requisite=b.service</code> is used on
        <code class="filename">a.service</code>, this dependency will show as
        <code class="varname">RequisiteOf=a.service</code> in property listing of
        <code class="filename">b.service</code>. <code class="varname">RequisiteOf=</code>
        dependency cannot be specified directly.</p></dd><dt id="BindsTo="><span class="term"><code class="varname">BindsTo=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#BindsTo=">¶</a></dt><dd><p>Configures requirement dependencies, very similar in style to
        <code class="varname">Requires=</code>. However, this dependency type is stronger: in addition to the effect of
        <code class="varname">Requires=</code> it declares that if the unit bound to is stopped, this unit will be stopped
        too. This means a unit bound to another unit that suddenly enters inactive state will be stopped too.
        Units can suddenly, unexpectedly enter inactive state for different reasons: the main process of a service unit
        might terminate on its own choice, the backing device of a device unit might be unplugged or the mount point of
        a mount unit might be unmounted without involvement of the system and service manager.</p><p>When used in conjunction with <code class="varname">After=</code> on the same unit the behaviour of
        <code class="varname">BindsTo=</code> is even stronger. In this case, the unit bound to strictly has to be in active
        state for this unit to also be in active state. This not only means a unit bound to another unit that suddenly
        enters inactive state, but also one that is bound to another unit that gets skipped due to a failed condition
        check (such as <code class="varname">ConditionPathExists=</code>, <code class="varname">ConditionPathIsSymbolicLink=</code>, … —
        see below) will be stopped, should it be running. Hence, in many cases it is best to combine
        <code class="varname">BindsTo=</code> with <code class="varname">After=</code>.</p><p>When <code class="varname">BindsTo=b.service</code> is used on
        <code class="filename">a.service</code>, this dependency will show as
        <code class="varname">BoundBy=a.service</code> in property listing of
        <code class="filename">b.service</code>. <code class="varname">BoundBy=</code>
        dependency cannot be specified directly.</p></dd><dt id="PartOf="><span class="term"><code class="varname">PartOf=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#PartOf=">¶</a></dt><dd><p>Configures dependencies similar to
        <code class="varname">Requires=</code>, but limited to stopping and
        restarting of units. When systemd stops or restarts the units
        listed here, the action is propagated to this unit. Note that
        this is a one-way dependency — changes to this unit do not
        affect the listed units.</p><p>When <code class="varname">PartOf=b.service</code> is used on
        <code class="filename">a.service</code>, this dependency will show as
        <code class="varname">ConsistsOf=a.service</code> in property listing of
        <code class="filename">b.service</code>. <code class="varname">ConsistsOf=</code>
        dependency cannot be specified directly.</p></dd><dt id="Upholds="><span class="term"><code class="varname">Upholds=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Upholds=">¶</a></dt><dd><p>Configures dependencies similar to <code class="varname">Wants=</code>, but as long as this unit
        is up, all units listed in <code class="varname">Upholds=</code> are started whenever found to be inactive or
        failed, and no job is queued for them. While a <code class="varname">Wants=</code> dependency on another unit
        has a one-time effect when this units started, a <code class="varname">Upholds=</code> dependency on it has a
        continuous effect, constantly restarting the unit if necessary. This is an alternative to the
        <code class="varname">Restart=</code> setting of service units, to ensure they are kept running whatever
        happens.</p><p>When <code class="varname">Upholds=b.service</code> is used on <code class="filename">a.service</code>, this
        dependency will show as <code class="varname">UpheldBy=a.service</code> in the property listing of
        <code class="filename">b.service</code>. The <code class="varname">UpheldBy=</code> dependency cannot be specified
        directly.</p></dd><dt id="Conflicts="><span class="term"><code class="varname">Conflicts=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Conflicts=">¶</a></dt><dd><p>A space-separated list of unit names. Configures negative requirement
        dependencies. If a unit has a <code class="varname">Conflicts=</code> setting on another unit, starting the
        former will stop the latter and vice versa.</p><p>Note that this setting does not imply an ordering dependency, similarly to the
        <code class="varname">Wants=</code> and <code class="varname">Requires=</code> dependencies described above. This means
        that to ensure that the conflicting unit is stopped before the other unit is started, an
        <code class="varname">After=</code> or <code class="varname">Before=</code> dependency must be declared. It doesn't
        matter which of the two ordering dependencies is used, because stop jobs are always ordered before
        start jobs, see the discussion in <code class="varname">Before=</code>/<code class="varname">After=</code> below.</p><p>If unit A that conflicts with unit B is scheduled to
        be started at the same time as B, the transaction will either
        fail (in case both are required parts of the transaction) or be
        modified to be fixed (in case one or both jobs are not a
        required part of the transaction). In the latter case, the job
        that is not required will be removed, or in case both are
        not required, the unit that conflicts will be started and the
        unit that is conflicted is stopped.</p></dd><dt id="Before="><span class="term"><code class="varname">Before=</code>, </span><span class="term"><code class="varname">After=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Before=">¶</a></dt><dd><p>These two settings expect a space-separated list of unit names. They may be specified
        more than once, in which case dependencies for all listed names are created.</p><p>Those two settings configure ordering dependencies between units. If unit
        <code class="filename">foo.service</code> contains the setting <code class="option">Before=bar.service</code> and both
        units are being started, <code class="filename">bar.service</code>'s start-up is delayed until
        <code class="filename">foo.service</code> has finished starting up. <code class="varname">After=</code> is the inverse
        of <code class="varname">Before=</code>, i.e. while <code class="varname">Before=</code> ensures that the configured unit
        is started before the listed unit begins starting up, <code class="varname">After=</code> ensures the opposite,
        that the listed unit is fully started up before the configured unit is started.</p><p>When two units with an ordering dependency between them are shut down, the inverse of the
        start-up order is applied. I.e. if a unit is configured with <code class="varname">After=</code> on another
        unit, the former is stopped before the latter if both are shut down. Given two units with any
        ordering dependency between them, if one unit is shut down and the other is started up, the shutdown
        is ordered before the start-up. It doesn't matter if the ordering dependency is
        <code class="varname">After=</code> or <code class="varname">Before=</code>, in this case. It also doesn't matter which
        of the two is shut down, as long as one is shut down and the other is started up; the shutdown is
        ordered before the start-up in all cases. If two units have no ordering dependencies between them,
        they are shut down or started up simultaneously, and no ordering takes place. It depends on the unit
        type when precisely a unit has finished starting up. Most importantly, for service units start-up is
        considered completed for the purpose of <code class="varname">Before=</code>/<code class="varname">After=</code> when all
        its configured start-up commands have been invoked and they either failed or reported start-up
        success. Note that this does includes <code class="varname">ExecStartPost=</code> (or
        <code class="varname">ExecStopPost=</code> for the shutdown case).</p><p>Note that those settings are independent of and orthogonal to the requirement dependencies as
        configured by <code class="varname">Requires=</code>, <code class="varname">Wants=</code>, <code class="varname">Requisite=</code>,
        or <code class="varname">BindsTo=</code>. It is a common pattern to include a unit name in both the
        <code class="varname">After=</code> and <code class="varname">Wants=</code> options, in which case the unit listed will
        be started before the unit that is configured with these options.</p><p>Note that <code class="varname">Before=</code> dependencies on device units have no effect and are not
        supported.  Devices generally become available as a result of an external hotplug event, and systemd
        creates the corresponding device unit without delay.</p></dd><dt id="OnFailure="><span class="term"><code class="varname">OnFailure=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#OnFailure=">¶</a></dt><dd><p>A space-separated list of one or more units that are activated when this unit enters
        the "<code class="literal">failed</code>" state.  A service unit using <code class="varname">Restart=</code> enters the
        failed state only after the start limits are reached.</p></dd><dt id="OnSuccess="><span class="term"><code class="varname">OnSuccess=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#OnSuccess=">¶</a></dt><dd><p>A space-separated list of one or more units that are activated when this unit enters
        the "<code class="literal">inactive</code>" state.</p></dd><dt id="PropagatesReloadTo="><span class="term"><code class="varname">PropagatesReloadTo=</code>, </span><span class="term"><code class="varname">ReloadPropagatedFrom=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#PropagatesReloadTo=">¶</a></dt><dd><p>A space-separated list of one or more units to which reload requests from this unit
        shall be propagated to, or units from which reload requests shall be propagated to this unit,
        respectively. Issuing a reload request on a unit will automatically also enqueue reload requests on
        all units that are linked to it using these two settings.</p></dd><dt id="PropagatesStopTo="><span class="term"><code class="varname">PropagatesStopTo=</code>, </span><span class="term"><code class="varname">StopPropagatedFrom=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#PropagatesStopTo=">¶</a></dt><dd><p>A space-separated list of one or more units to which stop requests from this unit
        shall be propagated to, or units from which stop requests shall be propagated to this unit,
        respectively. Issuing a stop request on a unit will automatically also enqueue stop requests on all
        units that are linked to it using these two settings.</p></dd><dt id="JoinsNamespaceOf="><span class="term"><code class="varname">JoinsNamespaceOf=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#JoinsNamespaceOf=">¶</a></dt><dd><p>For units that start processes (such as service units), lists one or more other units
        whose network and/or temporary file namespace to join. This only applies to unit types which support
        the <code class="varname">PrivateNetwork=</code>, <code class="varname">NetworkNamespacePath=</code>,
        <code class="varname">PrivateIPC=</code>, <code class="varname">IPCNamespacePath=</code>, and
        <code class="varname">PrivateTmp=</code> directives (see
        <a href="systemd.exec.html#"><span class="citerefentry"><span class="refentrytitle">systemd.exec</span>(5)</span></a> for
        details). If a unit that has this setting set is started, its processes will see the same
        <code class="filename">/tmp/</code>, <code class="filename">/var/tmp/</code>, IPC namespace and network namespace as
        one listed unit that is started. If multiple listed units are already started, it is not defined
        which namespace is joined. Note that this setting only has an effect if
        <code class="varname">PrivateNetwork=</code>/<code class="varname">NetworkNamespacePath=</code>,
        <code class="varname">PrivateIPC=</code>/<code class="varname">IPCNamespacePath=</code> and/or
        <code class="varname">PrivateTmp=</code> is enabled for both the unit that joins the namespace and the unit
        whose namespace is joined.</p></dd><dt id="RequiresMountsFor="><span class="term"><code class="varname">RequiresMountsFor=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#RequiresMountsFor=">¶</a></dt><dd><p>Takes a space-separated list of absolute
        paths. Automatically adds dependencies of type
        <code class="varname">Requires=</code> and <code class="varname">After=</code> for
        all mount units required to access the specified path.</p><p>Mount points marked with <code class="option">noauto</code> are not
        mounted automatically through <code class="filename">local-fs.target</code>,
        but are still honored for the purposes of this option, i.e. they
        will be pulled in by this unit.</p></dd><dt id="OnFailureJobMode="><span class="term"><code class="varname">OnFailureJobMode=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#OnFailureJobMode=">¶</a></dt><dd><p>Takes a value of
        "<code class="literal">fail</code>",
        "<code class="literal">replace</code>",
        "<code class="literal">replace-irreversibly</code>",
        "<code class="literal">isolate</code>",
        "<code class="literal">flush</code>",
        "<code class="literal">ignore-dependencies</code>" or
        "<code class="literal">ignore-requirements</code>". Defaults to
        "<code class="literal">replace</code>". Specifies how the units listed in
        <code class="varname">OnFailure=</code> will be enqueued. See
        <a href="systemctl.html#"><span class="citerefentry"><span class="refentrytitle">systemctl</span>(1)</span></a>'s
        <code class="option">--job-mode=</code> option for details on the
        possible values. If this is set to "<code class="literal">isolate</code>",
        only a single unit may be listed in
        <code class="varname">OnFailure=</code>.</p></dd><dt id="IgnoreOnIsolate="><span class="term"><code class="varname">IgnoreOnIsolate=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#IgnoreOnIsolate=">¶</a></dt><dd><p>Takes a boolean argument. If <code class="option">true</code>, this unit will not be stopped
        when isolating another unit. Defaults to <code class="option">false</code> for service, target, socket, timer,
        and path units, and <code class="option">true</code> for slice, scope, device, swap, mount, and automount
        units.</p></dd><dt id="StopWhenUnneeded="><span class="term"><code class="varname">StopWhenUnneeded=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#StopWhenUnneeded=">¶</a></dt><dd><p>Takes a boolean argument. If
        <code class="option">true</code>, this unit will be stopped when it is no
        longer used. Note that, in order to minimize the work to be
        executed, systemd will not stop units by default unless they
        are conflicting with other units, or the user explicitly
        requested their shut down. If this option is set, a unit will
        be automatically cleaned up if no other active unit requires
        it. Defaults to <code class="option">false</code>.</p></dd><dt id="RefuseManualStart="><span class="term"><code class="varname">RefuseManualStart=</code>, </span><span class="term"><code class="varname">RefuseManualStop=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#RefuseManualStart=">¶</a></dt><dd><p>Takes a boolean argument. If
        <code class="option">true</code>, this unit can only be activated or
        deactivated indirectly. In this case, explicit start-up or
        termination requested by the user is denied, however if it is
        started or stopped as a dependency of another unit, start-up
        or termination will succeed. This is mostly a safety feature
        to ensure that the user does not accidentally activate units
        that are not intended to be activated explicitly, and not
        accidentally deactivate units that are not intended to be
        deactivated. These options default to
        <code class="option">false</code>.</p></dd><dt id="AllowIsolate="><span class="term"><code class="varname">AllowIsolate=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#AllowIsolate=">¶</a></dt><dd><p>Takes a boolean argument. If
        <code class="option">true</code>, this unit may be used with the
        <span class="command"><strong>systemctl isolate</strong></span> command. Otherwise, this
        will be refused. It probably is a good idea to leave this
        disabled except for target units that shall be used similar to
        runlevels in SysV init systems, just as a precaution to avoid
        unusable system states. This option defaults to
        <code class="option">false</code>.</p></dd><dt id="DefaultDependencies="><span class="term"><code class="varname">DefaultDependencies=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#DefaultDependencies=">¶</a></dt><dd><p>Takes a boolean argument. If
        <code class="option">yes</code>, (the default), a few default
        dependencies will implicitly be created for the unit. The
        actual dependencies created depend on the unit type. For
        example, for service units, these dependencies ensure that the
        service is started only after basic system initialization is
        completed and is properly terminated on system shutdown. See
        the respective man pages for details. Generally, only services
        involved with early boot or late shutdown should set this
        option to <code class="option">no</code>. It is highly recommended to
        leave this option enabled for the majority of common units. If
        set to <code class="option">no</code>, this option does not disable
        all implicit dependencies, just non-essential
        ones.</p></dd><dt id="CollectMode="><span class="term"><code class="varname">CollectMode=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#CollectMode=">¶</a></dt><dd><p>Tweaks the "garbage collection" algorithm for this unit. Takes one of <code class="option">inactive</code>
        or <code class="option">inactive-or-failed</code>. If set to <code class="option">inactive</code> the unit will be unloaded if it is
        in the <code class="constant">inactive</code> state and is not referenced by clients, jobs or other units — however it
        is not unloaded if it is in the <code class="constant">failed</code> state. In <code class="option">failed</code> mode, failed
        units are not unloaded until the user invoked <span class="command"><strong>systemctl reset-failed</strong></span> on them to reset the
        <code class="constant">failed</code> state, or an equivalent command. This behaviour is altered if this option is set to
        <code class="option">inactive-or-failed</code>: in this case the unit is unloaded even if the unit is in a
        <code class="constant">failed</code> state, and thus an explicitly resetting of the <code class="constant">failed</code> state is
        not necessary. Note that if this mode is used unit results (such as exit codes, exit signals, consumed
        resources, …) are flushed out immediately after the unit completed, except for what is stored in the logging
        subsystem. Defaults to <code class="option">inactive</code>.</p></dd><dt id="FailureAction="><span class="term"><code class="varname">FailureAction=</code>, </span><span class="term"><code class="varname">SuccessAction=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#FailureAction=">¶</a></dt><dd><p>Configure the action to take when the unit stops and enters a failed state or inactive state.
        Takes one of <code class="option">none</code>, <code class="option">reboot</code>, <code class="option">reboot-force</code>,
        <code class="option">reboot-immediate</code>, <code class="option">poweroff</code>, <code class="option">poweroff-force</code>,
        <code class="option">poweroff-immediate</code>, <code class="option">exit</code>, and <code class="option">exit-force</code>. In system mode,
        all options are allowed. In user mode, only <code class="option">none</code>, <code class="option">exit</code>, and
        <code class="option">exit-force</code> are allowed. Both options default to <code class="option">none</code>.</p><p>If <code class="option">none</code> is set, no action will be triggered. <code class="option">reboot</code> causes a reboot
        following the normal shutdown procedure (i.e. equivalent to <span class="command"><strong>systemctl reboot</strong></span>).
        <code class="option">reboot-force</code> causes a forced reboot which will terminate all processes forcibly but should
        cause no dirty file systems on reboot (i.e. equivalent to <span class="command"><strong>systemctl reboot -f</strong></span>) and
        <code class="option">reboot-immediate</code> causes immediate execution of the
        <a href="http://man7.org/linux/man-pages/man2/reboot.2.html"><span class="citerefentry"><span class="refentrytitle">reboot</span>(2)</span></a> system call, which
        might result in data loss (i.e. equivalent to <span class="command"><strong>systemctl reboot -ff</strong></span>). Similarly,
        <code class="option">poweroff</code>, <code class="option">poweroff-force</code>, <code class="option">poweroff-immediate</code> have the effect
        of powering down the system with similar semantics. <code class="option">exit</code> causes the manager to exit following
        the normal shutdown procedure, and <code class="option">exit-force</code> causes it terminate without shutting down
        services. When <code class="option">exit</code> or <code class="option">exit-force</code> is used by default the exit status of the
        main process of the unit (if this applies) is returned from the service manager. However, this may be overridden
        with <code class="varname">FailureActionExitStatus=</code>/<code class="varname">SuccessActionExitStatus=</code>, see
        below.</p></dd><dt id="FailureActionExitStatus="><span class="term"><code class="varname">FailureActionExitStatus=</code>, </span><span class="term"><code class="varname">SuccessActionExitStatus=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#FailureActionExitStatus=">¶</a></dt><dd><p>Controls the exit status to propagate back to an invoking container manager (in case of a
        system service) or service manager (in case of a user manager) when the
        <code class="varname">FailureAction=</code>/<code class="varname">SuccessAction=</code> are set to <code class="option">exit</code> or
        <code class="option">exit-force</code> and the action is triggered. By default the exit status of the main process of the
        triggering unit (if this applies) is propagated. Takes a value in the range 0…255 or the empty string to
        request default behaviour.</p></dd><dt id="JobTimeoutSec="><span class="term"><code class="varname">JobTimeoutSec=</code>, </span><span class="term"><code class="varname">JobRunningTimeoutSec=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#JobTimeoutSec=">¶</a></dt><dd><p><code class="varname">JobTimeoutSec=</code> specifies a timeout for the whole job that starts
        running when the job is queued. <code class="varname">JobRunningTimeoutSec=</code> specifies a timeout that
        starts running when the queued job is actually started. If either limit is reached, the job will be
        cancelled, the unit however will not change state or even enter the "<code class="literal">failed</code>" mode.
        </p><p>Both settings take a time span with the default unit of seconds, but other units may be
        specified, see
        <a href="systemd.time.html#"><span class="citerefentry"><span class="refentrytitle">systemd.time</span>(5)</span></a>.
        The default is "<code class="literal">infinity</code>" (job timeouts disabled), except for device units where
        <code class="varname">JobRunningTimeoutSec=</code> defaults to <code class="varname">DefaultTimeoutStartSec=</code>.
        </p><p>Note: these timeouts are independent from any unit-specific timeouts (for example, the timeout
        set with <code class="varname">TimeoutStartSec=</code> in service units). The job timeout has no effect on the
        unit itself. Or in other words: unit-specific timeouts are useful to abort unit state changes, and
        revert them. The job timeout set with this option however is useful to abort only the job waiting for
        the unit state to change.</p></dd><dt id="JobTimeoutAction="><span class="term"><code class="varname">JobTimeoutAction=</code>, </span><span class="term"><code class="varname">JobTimeoutRebootArgument=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#JobTimeoutAction=">¶</a></dt><dd><p><code class="varname">JobTimeoutAction=</code> optionally configures an additional action to
        take when the timeout is hit, see description of <code class="varname">JobTimeoutSec=</code> and
        <code class="varname">JobRunningTimeoutSec=</code> above. It takes the same values as
        <code class="varname">StartLimitAction=</code>. Defaults to <code class="option">none</code>.</p><p><code class="varname">JobTimeoutRebootArgument=</code> configures an optional reboot string to pass to
        the <a href="http://man7.org/linux/man-pages/man2/reboot.2.html"><span class="citerefentry"><span class="refentrytitle">reboot</span>(2)</span></a> system
        call.</p></dd><dt id="StartLimitIntervalSec=interval"><span class="term"><code class="varname">StartLimitIntervalSec=<em class="replaceable"><code>interval</code></em></code>, </span><span class="term"><code class="varname">StartLimitBurst=<em class="replaceable"><code>burst</code></em></code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#StartLimitIntervalSec=interval">¶</a></dt><dd><p>Configure unit start rate limiting. Units which are started more than
        <em class="replaceable"><code>burst</code></em> times within an <em class="replaceable"><code>interval</code></em> time span are
        not permitted to start any more. Use <code class="varname">StartLimitIntervalSec=</code> to configure the
        checking interval and <code class="varname">StartLimitBurst=</code> to configure how many starts per interval
        are allowed.</p><p><em class="replaceable"><code>interval</code></em> is a time span with the default unit of seconds, but other
        units may be specified, see
        <a href="systemd.time.html#"><span class="citerefentry"><span class="refentrytitle">systemd.time</span>(5)</span></a>.
        Defaults to <code class="varname">DefaultStartLimitIntervalSec=</code> in manager configuration file, and may
        be set to 0 to disable any kind of rate limiting. <em class="replaceable"><code>burst</code></em> is a number and
        defaults to <code class="varname">DefaultStartLimitBurst=</code> in manager configuration file.</p><p>These configuration options are particularly useful in conjunction with the service setting
        <code class="varname">Restart=</code> (see
        <a href="systemd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd.service</span>(5)</span></a>);
        however, they apply to all kinds of starts (including manual), not just those triggered by the
        <code class="varname">Restart=</code> logic.</p><p>Note that units which are configured for <code class="varname">Restart=</code>, and which reach the start
        limit are not attempted to be restarted anymore; however, they may still be restarted manually or
        from a timer or socket at a later point, after the <em class="replaceable"><code>interval</code></em> has passed.
        From that point on, the restart logic is activated again. <span class="command"><strong>systemctl reset-failed</strong></span>
        will cause the restart rate counter for a service to be flushed, which is useful if the administrator
        wants to manually start a unit and the start limit interferes with that. Rate-limiting is enforced
        after any unit condition checks are executed, and hence unit activations with failing conditions do
        not count towards the rate limit.</p><p>When a unit is unloaded due to the garbage collection logic (see above) its rate limit counters
        are flushed out too. This means that configuring start rate limiting for a unit that is not
        referenced continuously has no effect.</p><p>This setting does not apply to slice, target, device, and scope units, since they are unit
        types whose activation may either never fail, or may succeed only a single time.</p></dd><dt id="StartLimitAction="><span class="term"><code class="varname">StartLimitAction=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#StartLimitAction=">¶</a></dt><dd><p>Configure an additional action to take if the rate limit configured with
        <code class="varname">StartLimitIntervalSec=</code> and <code class="varname">StartLimitBurst=</code> is hit. Takes the same
        values as the <code class="varname">FailureAction=</code>/<code class="varname">SuccessAction=</code> settings. If
        <code class="option">none</code> is set, hitting the rate limit will trigger no action except that
        the start will not be permitted. Defaults to <code class="option">none</code>.</p></dd><dt id="RebootArgument="><span class="term"><code class="varname">RebootArgument=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#RebootArgument=">¶</a></dt><dd><p>Configure the optional argument for the
        <a href="http://man7.org/linux/man-pages/man2/reboot.2.html"><span class="citerefentry"><span class="refentrytitle">reboot</span>(2)</span></a> system call if
        <code class="varname">StartLimitAction=</code> or <code class="varname">FailureAction=</code> is a reboot action. This
        works just like the optional argument to <span class="command"><strong>systemctl reboot</strong></span> command.</p></dd><dt id="SourcePath="><span class="term"><code class="varname">SourcePath=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#SourcePath=">¶</a></dt><dd><p>A path to a configuration file this unit has
        been generated from. This is primarily useful for
        implementation of generator tools that convert configuration
        from an external configuration file format into native unit
        files. This functionality should not be used in normal
        units.</p></dd></dl></div><div class="refsect2"><a name="id-1.10.4"></a><h3 id="Conditions and Asserts">Conditions and Asserts<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Conditions%20and%20Asserts">¶</a></h3><p>Unit files may also include a number of <code class="varname">Condition…=</code> and <code class="varname">Assert…=</code> settings. Before the unit is started, systemd will verify that the
      specified conditions and asserts are true. If not, the starting of the unit will be (mostly silently)
      skipped (in case of conditions), or aborted with an error message (in case of asserts). Failing
      conditions or asserts will not result in the unit being moved into the "<code class="literal">failed</code>"
      state. The conditions and asserts are checked at the time the queued start job is to be executed. The
      ordering dependencies are still respected, so other units are still pulled in and ordered as if this
      unit was successfully activated, and the conditions and asserts are executed the precise moment the
      unit would normally start and thus can validate system state after the units ordered before completed
      initialization. Use condition expressions for skipping units that do not apply to the local system, for
      example because the kernel or runtime environment doesn't require their functionality.
      </p><p>If multiple conditions are specified, the unit will be executed if all of them apply (i.e. a
      logical AND is applied). Condition checks can use a pipe symbol ("<code class="literal">|</code>") after the equals
      sign ("<code class="literal">Condition…=|…</code>"), which causes the condition to become a
      <span class="emphasis"><em>triggering</em></span> condition. If at least one triggering condition is defined for a unit,
      then the unit will be started if at least one of the triggering conditions of the unit applies and all
      of the regular (i.e. non-triggering) conditions apply. If you prefix an argument with the pipe symbol
      and an exclamation mark, the pipe symbol must be passed first, the exclamation second. If any of these
      options is assigned the empty string, the list of conditions is reset completely, all previous
      condition settings (of any kind) will have no effect.</p><p>The <code class="varname">AssertArchitecture=</code>, <code class="varname">AssertVirtualization=</code>, … options
      are similar to conditions but cause the start job to fail (instead of being skipped). The failed check
      is logged. Units with failed conditions are considered to be in a clean state and will be garbage
      collected if they are not referenced. This means that when queried, the condition failure may or may
      not show up in the state of the unit.</p><p>Note that neither assertion nor condition expressions result in unit state changes. Also note
      that both are checked at the time the job is to be executed, i.e. long after depending jobs and it
      itself were queued. Thus, neither condition nor assertion expressions are suitable for conditionalizing
      unit dependencies.</p><p>The <span class="command"><strong>condition</strong></span> verb of
      <a href="systemd-analyze.html#"><span class="citerefentry"><span class="refentrytitle">systemd-analyze</span>(1)</span></a> can
      be used to test condition and assert expressions.</p><p>Except for <code class="varname">ConditionPathIsSymbolicLink=</code>, all path checks follow symlinks.</p><div class="variablelist"><dl class="variablelist"><dt id="ConditionArchitecture="><span class="term"><code class="varname">ConditionArchitecture=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionArchitecture=">¶</a></dt><dd><p>Check whether the system is running on a specific architecture. Takes one of
          "<code class="literal">x86</code>",
          "<code class="literal">x86-64</code>",
          "<code class="literal">ppc</code>",
          "<code class="literal">ppc-le</code>",
          "<code class="literal">ppc64</code>",
          "<code class="literal">ppc64-le</code>",
          "<code class="literal">ia64</code>",
          "<code class="literal">parisc</code>",
          "<code class="literal">parisc64</code>",
          "<code class="literal">s390</code>",
          "<code class="literal">s390x</code>",
          "<code class="literal">sparc</code>",
          "<code class="literal">sparc64</code>",
          "<code class="literal">mips</code>",
          "<code class="literal">mips-le</code>",
          "<code class="literal">mips64</code>",
          "<code class="literal">mips64-le</code>",
          "<code class="literal">alpha</code>",
          "<code class="literal">arm</code>",
          "<code class="literal">arm-be</code>",
          "<code class="literal">arm64</code>",
          "<code class="literal">arm64-be</code>",
          "<code class="literal">sh</code>",
          "<code class="literal">sh64</code>",
          "<code class="literal">m68k</code>",
          "<code class="literal">tilegx</code>",
          "<code class="literal">cris</code>",
          "<code class="literal">arc</code>",
          "<code class="literal">arc-be</code>", or
          "<code class="literal">native</code>".</p><p>The architecture is determined from the information returned by
          <a href="http://man7.org/linux/man-pages/man2/uname.2.html"><span class="citerefentry"><span class="refentrytitle">uname</span>(2)</span></a>
          and is thus subject to
          <a href="http://man7.org/linux/man-pages/man2/personality.2.html"><span class="citerefentry"><span class="refentrytitle">personality</span>(2)</span></a>.
          Note that a <code class="varname">Personality=</code> setting in the same unit file has no effect on this
          condition. A special architecture name "<code class="literal">native</code>" is mapped to the architecture the
          system manager itself is compiled for. The test may be negated by prepending an exclamation
          mark.</p></dd><dt id="ConditionFirmware="><span class="term"><code class="varname">ConditionFirmware=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionFirmware=">¶</a></dt><dd><p>Check whether the system's firmware is of a certain type. Possible values are:
          "<code class="literal">uefi</code>" (for systems with EFI),
          "<code class="literal">device-tree</code>" (for systems with a device tree) and
          "<code class="literal">device-tree-compatible(xyz)</code>" (for systems with a device tree that is compatible to "<code class="literal">xyz</code>").</p></dd><dt id="ConditionVirtualization="><span class="term"><code class="varname">ConditionVirtualization=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionVirtualization=">¶</a></dt><dd><p>Check whether the system is executed in a virtualized environment and optionally
          test whether it is a specific implementation. Takes either boolean value to check if being executed
          in any virtualized environment, or one of
          "<code class="literal">vm</code>" and
          "<code class="literal">container</code>" to test against a generic type of virtualization solution, or one of
          "<code class="literal">qemu</code>",
          "<code class="literal">kvm</code>",
          "<code class="literal">amazon</code>",
          "<code class="literal">zvm</code>",
          "<code class="literal">vmware</code>",
          "<code class="literal">microsoft</code>",
          "<code class="literal">oracle</code>",
          "<code class="literal">powervm</code>",
          "<code class="literal">xen</code>",
          "<code class="literal">bochs</code>",
          "<code class="literal">uml</code>",
          "<code class="literal">bhyve</code>",
          "<code class="literal">qnx</code>",
          "<code class="literal">openvz</code>",
          "<code class="literal">lxc</code>",
          "<code class="literal">lxc-libvirt</code>",
          "<code class="literal">systemd-nspawn</code>",
          "<code class="literal">docker</code>",
          "<code class="literal">podman</code>",
          "<code class="literal">rkt</code>",
          "<code class="literal">wsl</code>",
          "<code class="literal">proot</code>",
          "<code class="literal">pouch</code>",
          "<code class="literal">acrn</code>" to test
          against a specific implementation, or
          "<code class="literal">private-users</code>" to check whether we are running in a user namespace. See
          <a href="systemd-detect-virt.html#"><span class="citerefentry"><span class="refentrytitle">systemd-detect-virt</span>(1)</span></a>
          for a full list of known virtualization technologies and their identifiers. If multiple
          virtualization technologies are nested, only the innermost is considered. The test may be negated
          by prepending an exclamation mark.</p></dd><dt id="ConditionHost="><span class="term"><code class="varname">ConditionHost=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionHost=">¶</a></dt><dd><p><code class="varname">ConditionHost=</code> may be used to match against the hostname or
          machine ID of the host. This either takes a hostname string (optionally with shell style globs)
          which is tested against the locally set hostname as returned by
          <a href="http://man7.org/linux/man-pages/man2/gethostname.2.html"><span class="citerefentry"><span class="refentrytitle">gethostname</span>(2)</span></a>, or
          a machine ID formatted as string (see
          <a href="machine-id.html#"><span class="citerefentry"><span class="refentrytitle">machine-id</span>(5)</span></a>).
          The test may be negated by prepending an exclamation mark.</p></dd><dt id="ConditionKernelCommandLine="><span class="term"><code class="varname">ConditionKernelCommandLine=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionKernelCommandLine=">¶</a></dt><dd><p><code class="varname">ConditionKernelCommandLine=</code> may be used to check whether a
          specific kernel command line option is set (or if prefixed with the exclamation mark — unset). The
          argument must either be a single word, or an assignment (i.e. two words, separated by
          "<code class="literal">=</code>"). In the former case the kernel command line is searched for the word
          appearing as is, or as left hand side of an assignment. In the latter case, the exact assignment is
          looked for with right and left hand side matching. This operates on the kernel command line
          communicated to userspace via <code class="filename">/proc/cmdline</code>, except when the service manager
          is invoked as payload of a container manager, in which case the command line of <code class="filename">PID
          1</code> is used instead (i.e. <code class="filename">/proc/1/cmdline</code>).</p></dd><dt id="ConditionKernelVersion="><span class="term"><code class="varname">ConditionKernelVersion=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionKernelVersion=">¶</a></dt><dd><p><code class="varname">ConditionKernelVersion=</code> may be used to check whether the kernel
          version (as reported by <span class="command"><strong>uname -r</strong></span>) matches a certain expression (or if prefixed
          with the exclamation mark does not match it). The argument must be a list of (potentially quoted)
          expressions.  For each of the expressions, if it starts with one of "<code class="literal">&lt;</code>",
          "<code class="literal">&lt;=</code>", "<code class="literal">=</code>", "<code class="literal">!=</code>", "<code class="literal">&gt;=</code>",
          "<code class="literal">&gt;</code>" a relative version comparison is done, otherwise the specified string is
          matched with shell-style globs.</p><p>Note that using the kernel version string is an unreliable way to determine which features
          are supported by a kernel, because of the widespread practice of backporting drivers, features, and
          fixes from newer upstream kernels into older versions provided by distributions. Hence, this check
          is inherently unportable and should not be used for units which may be used on different
          distributions.</p></dd><dt id="ConditionEnvironment="><span class="term"><code class="varname">ConditionEnvironment=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionEnvironment=">¶</a></dt><dd><p><code class="varname">ConditionEnvironment=</code> may be used to check whether a specific
          environment variable is set (or if prefixed with the exclamation mark — unset) in the service
          manager's environment block.

          The argument may be a single word, to check if the variable with this name is defined in the
          environment block, or an assignment
          ("<code class="literal"><em class="replaceable"><code>name</code></em>=<em class="replaceable"><code>value</code></em></code>"), to check if
          the variable with this exact value is defined. Note that the environment block of the service
          manager itself is checked, i.e. not any variables defined with <code class="varname">Environment=</code> or
          <code class="varname">EnvironmentFile=</code>, as described above. This is particularly useful when the
          service manager runs inside a containerized environment or as per-user service manager, in order to
          check for variables passed in by the enclosing container manager or PAM.</p></dd><dt id="ConditionSecurity="><span class="term"><code class="varname">ConditionSecurity=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionSecurity=">¶</a></dt><dd><p><code class="varname">ConditionSecurity=</code> may be used to check whether the given
          security technology is enabled on the system. Currently, the recognized values are
          "<code class="literal">selinux</code>", "<code class="literal">apparmor</code>", "<code class="literal">tomoyo</code>",
          "<code class="literal">ima</code>", "<code class="literal">smack</code>", "<code class="literal">audit</code>",
          "<code class="literal">uefi-secureboot</code>" and "<code class="literal">tpm2</code>". The test may be negated by prepending
          an exclamation mark.</p></dd><dt id="ConditionCapability="><span class="term"><code class="varname">ConditionCapability=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionCapability=">¶</a></dt><dd><p>Check whether the given capability exists in the capability bounding set of the
          service manager (i.e. this does not check whether capability is actually available in the permitted
          or effective sets, see
          <a href="http://man7.org/linux/man-pages/man7/capabilities.7.html"><span class="citerefentry"><span class="refentrytitle">capabilities</span>(7)</span></a>
          for details). Pass a capability name such as "<code class="literal">CAP_MKNOD</code>", possibly prefixed with
          an exclamation mark to negate the check.</p></dd><dt id="ConditionACPower="><span class="term"><code class="varname">ConditionACPower=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionACPower=">¶</a></dt><dd><p>Check whether the system has AC power, or is exclusively battery powered at the
          time of activation of the unit. This takes a boolean argument. If set to "<code class="literal">true</code>",
          the condition will hold only if at least one AC connector of the system is connected to a power
          source, or if no AC connectors are known. Conversely, if set to "<code class="literal">false</code>", the
          condition will hold only if there is at least one AC connector known and all AC connectors are
          disconnected from a power source.</p></dd><dt id="ConditionNeedsUpdate="><span class="term"><code class="varname">ConditionNeedsUpdate=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionNeedsUpdate=">¶</a></dt><dd><p>Takes one of <code class="filename">/var/</code> or <code class="filename">/etc/</code> as argument,
          possibly prefixed with a "<code class="literal">!</code>" (to invert the condition). This condition may be
          used to conditionalize units on whether the specified directory requires an update because
          <code class="filename">/usr/</code>'s modification time is newer than the stamp file
          <code class="filename">.updated</code> in the specified directory. This is useful to implement offline
          updates of the vendor operating system resources in <code class="filename">/usr/</code> that require updating
          of <code class="filename">/etc/</code> or <code class="filename">/var/</code> on the next following boot. Units making
          use of this condition should order themselves before
          <a href="systemd-update-done.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd-update-done.service</span>(8)</span></a>,
          to make sure they run before the stamp file's modification time gets reset indicating a completed
          update.</p><p>If the <code class="varname">systemd.condition-needs-update=</code> option is specified on the kernel
          command line (taking a boolean), it will override the result of this condition check, taking
          precedence over any file modification time checks. If the kernel command line option is used,
          <code class="filename">systemd-update-done.service</code> will not have immediate effect on any following
          <code class="varname">ConditionNeedsUpdate=</code> checks, until the system is rebooted where the kernel
          command line option is not specified anymore.</p><p>Note that to make this scheme effective, the timestamp of <code class="filename">/usr/</code> should
          be explicitly updated after its contents are modified. The kernel will automatically update
          modification timestamp on a directory only when immediate children of a directory are modified; an
          modification of nested files will not automatically result in mtime of <code class="filename">/usr/</code>
          being updated.</p><p>Also note that if the update method includes a call to execute appropriate post-update steps
          itself, it should not touch the timestamp of <code class="filename">/usr/</code>. In a typical distribution
          packaging scheme, packages will do any required update steps as part of the installation or
          upgrade, to make package contents immediately usable. <code class="varname">ConditionNeedsUpdate=</code>
          should be used with other update mechanisms where such an immediate update does not
          happen.</p></dd><dt id="ConditionFirstBoot="><span class="term"><code class="varname">ConditionFirstBoot=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionFirstBoot=">¶</a></dt><dd><p>Takes a boolean argument. This condition may be used to conditionalize units on
          whether the system is booting up for the first time.  This roughly means that <code class="filename">/etc/</code>
          is unpopulated (for details, see "First Boot Semantics" in
          <a href="machine-id.html#"><span class="citerefentry"><span class="refentrytitle">machine-id</span>(5)</span></a>).
          This may be used to populate <code class="filename">/etc/</code> on the first boot after factory reset, or
          when a new system instance boots up for the first time.</p><p>For robustness, units with <code class="varname">ConditionFirstBoot=yes</code> should order themselves
          before <code class="filename">first-boot-complete.target</code> and pull in this passive target with
          <code class="varname">Wants=</code>.  This ensures that in a case of an aborted first boot, these units will
          be re-run during the next system startup.</p><p>If the <code class="varname">systemd.condition-first-boot=</code> option is specified on the kernel
          command line (taking a boolean), it will override the result of this condition check, taking
          precedence over <code class="filename">/etc/machine-id</code> existence checks.</p></dd><dt id="ConditionPathExists="><span class="term"><code class="varname">ConditionPathExists=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathExists=">¶</a></dt><dd><p>Check for the existence of a file. If the specified absolute path name does not exist,
          the condition will fail. If the absolute path name passed to
          <code class="varname">ConditionPathExists=</code> is prefixed with an exclamation mark
          ("<code class="literal">!</code>"), the test is negated, and the unit is only started if the path does not
          exist.</p></dd><dt id="ConditionPathExistsGlob="><span class="term"><code class="varname">ConditionPathExistsGlob=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathExistsGlob=">¶</a></dt><dd><p><code class="varname">ConditionPathExistsGlob=</code> is similar to
          <code class="varname">ConditionPathExists=</code>, but checks for the existence of at least one file or
          directory matching the specified globbing pattern.</p></dd><dt id="ConditionPathIsDirectory="><span class="term"><code class="varname">ConditionPathIsDirectory=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathIsDirectory=">¶</a></dt><dd><p><code class="varname">ConditionPathIsDirectory=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that a certain path exists and is a
          directory.</p></dd><dt id="ConditionPathIsSymbolicLink="><span class="term"><code class="varname">ConditionPathIsSymbolicLink=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathIsSymbolicLink=">¶</a></dt><dd><p><code class="varname">ConditionPathIsSymbolicLink=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that a certain path exists and is a symbolic
          link.</p></dd><dt id="ConditionPathIsMountPoint="><span class="term"><code class="varname">ConditionPathIsMountPoint=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathIsMountPoint=">¶</a></dt><dd><p><code class="varname">ConditionPathIsMountPoint=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that a certain path exists and is a mount
          point.</p></dd><dt id="ConditionPathIsReadWrite="><span class="term"><code class="varname">ConditionPathIsReadWrite=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathIsReadWrite=">¶</a></dt><dd><p><code class="varname">ConditionPathIsReadWrite=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that the underlying file system is readable
          and writable (i.e. not mounted read-only).</p></dd><dt id="ConditionPathIsEncrypted="><span class="term"><code class="varname">ConditionPathIsEncrypted=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionPathIsEncrypted=">¶</a></dt><dd><p><code class="varname">ConditionPathIsEncrypted=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that the underlying file system's backing
          block device is encrypted using dm-crypt/LUKS. Note that this check does not cover ext4
          per-directory encryption, and only detects block level encryption. Moreover, if the specified path
          resides on a file system on top of a loopback block device, only encryption above the loopback device is
          detected. It is not detected whether the file system backing the loopback block device is encrypted.</p></dd><dt id="ConditionDirectoryNotEmpty="><span class="term"><code class="varname">ConditionDirectoryNotEmpty=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionDirectoryNotEmpty=">¶</a></dt><dd><p><code class="varname">ConditionDirectoryNotEmpty=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that a certain path exists and is a non-empty
          directory.</p></dd><dt id="ConditionFileNotEmpty="><span class="term"><code class="varname">ConditionFileNotEmpty=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionFileNotEmpty=">¶</a></dt><dd><p><code class="varname">ConditionFileNotEmpty=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that a certain path exists and refers to a
          regular file with a non-zero size.</p></dd><dt id="ConditionFileIsExecutable="><span class="term"><code class="varname">ConditionFileIsExecutable=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionFileIsExecutable=">¶</a></dt><dd><p><code class="varname">ConditionFileIsExecutable=</code> is similar to
          <code class="varname">ConditionPathExists=</code> but verifies that a certain path exists, is a regular file,
          and marked executable.</p></dd><dt id="ConditionUser="><span class="term"><code class="varname">ConditionUser=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionUser=">¶</a></dt><dd><p><code class="varname">ConditionUser=</code> takes a numeric "<code class="literal">UID</code>", a UNIX
          user name, or the special value "<code class="literal">@system</code>". This condition may be used to check
          whether the service manager is running as the given user. The special value
          "<code class="literal">@system</code>" can be used to check if the user id is within the system user
          range. This option is not useful for system services, as the system manager exclusively runs as the
          root user, and thus the test result is constant.</p></dd><dt id="ConditionGroup="><span class="term"><code class="varname">ConditionGroup=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionGroup=">¶</a></dt><dd><p><code class="varname">ConditionGroup=</code> is similar to <code class="varname">ConditionUser=</code>
          but verifies that the service manager's real or effective group, or any of its auxiliary groups,
          match the specified group or GID. This setting does not support the special value
          "<code class="literal">@system</code>".</p></dd><dt id="ConditionControlGroupController="><span class="term"><code class="varname">ConditionControlGroupController=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionControlGroupController=">¶</a></dt><dd><p>Check whether given cgroup controllers (e.g. "<code class="literal">cpu</code>") are available
          for use on the system or whether the legacy v1 cgroup or the modern v2 cgroup hierarchy is used.
          </p><p>Multiple controllers may be passed with a space separating them; in this case the condition
          will only pass if all listed controllers are available for use. Controllers unknown to systemd are
          ignored. Valid controllers are "<code class="literal">cpu</code>", "<code class="literal">cpuacct</code>",
          "<code class="literal">io</code>", "<code class="literal">blkio</code>", "<code class="literal">memory</code>",
          "<code class="literal">devices</code>", and "<code class="literal">pids</code>". Even if available in the kernel, a
          particular controller may not be available if it was disabled on the kernel command line with
          <code class="varname">cgroup_disable=controller</code>.</p><p>Alternatively, two special strings "<code class="literal">v1</code>" and "<code class="literal">v2</code>" may be
          specified (without any controller names). "<code class="literal">v2</code>" will pass if the unified v2 cgroup
          hierarchy is used, and "<code class="literal">v1</code>" will pass if the legacy v1 hierarchy or the hybrid
          hierarchy are used (see the discussion of <code class="varname">systemd.unified_cgroup_hierarchy</code> and
          <code class="varname">systemd.legacy_systemd_cgroup_controller</code> in
          <a href="systemd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd.service</span>(5)</span></a>
          for more information).</p></dd><dt id="ConditionMemory="><span class="term"><code class="varname">ConditionMemory=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionMemory=">¶</a></dt><dd><p>Verify that the specified amount of system memory is available to the current
          system. Takes a memory size in bytes as argument, optionally prefixed with a comparison operator
          "<code class="literal">&lt;</code>", "<code class="literal">&lt;=</code>", "<code class="literal">=</code>", "<code class="literal">!=</code>",
          "<code class="literal">&gt;=</code>", "<code class="literal">&gt;</code>". On bare-metal systems compares the amount of
          physical memory in the system with the specified size, adhering to the specified comparison
          operator. In containers compares the amount of memory assigned to the container instead.</p></dd><dt id="ConditionCPUs="><span class="term"><code class="varname">ConditionCPUs=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionCPUs=">¶</a></dt><dd><p>Verify that the specified number of CPUs is available to the current system. Takes
          a number of CPUs as argument, optionally prefixed with a comparison operator
          "<code class="literal">&lt;</code>", "<code class="literal">&lt;=</code>", "<code class="literal">=</code>", "<code class="literal">!=</code>",
          "<code class="literal">&gt;=</code>", "<code class="literal">&gt;</code>". Compares the number of CPUs in the CPU affinity
          mask configured of the service manager itself with the specified number, adhering to the specified
          comparison operator. On physical systems the number of CPUs in the affinity mask of the service
          manager usually matches the number of physical CPUs, but in special and virtual environments might
          differ. In particular, in containers the affinity mask usually matches the number of CPUs assigned
          to the container and not the physically available ones.</p></dd><dt id="ConditionCPUFeature="><span class="term"><code class="varname">ConditionCPUFeature=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionCPUFeature=">¶</a></dt><dd><p>Verify that a given CPU feature is available via the "<code class="literal">CPUID</code>"
          instruction. This condition only does something on i386 and x86-64 processors. On other
          processors it is assumed that the CPU does not support the given feature. It checks the leaves
          "<code class="literal">1</code>", "<code class="literal">7</code>", "<code class="literal">0x80000001</code>", and
          "<code class="literal">0x80000007</code>". Valid values are:
          "<code class="literal">fpu</code>",
          "<code class="literal">vme</code>",
          "<code class="literal">de</code>",
          "<code class="literal">pse</code>",
          "<code class="literal">tsc</code>",
          "<code class="literal">msr</code>",
          "<code class="literal">pae</code>",
          "<code class="literal">mce</code>",
          "<code class="literal">cx8</code>",
          "<code class="literal">apic</code>",
          "<code class="literal">sep</code>",
          "<code class="literal">mtrr</code>",
          "<code class="literal">pge</code>",
          "<code class="literal">mca</code>",
          "<code class="literal">cmov</code>",
          "<code class="literal">pat</code>",
          "<code class="literal">pse36</code>",
          "<code class="literal">clflush</code>",
          "<code class="literal">mmx</code>",
          "<code class="literal">fxsr</code>",
          "<code class="literal">sse</code>",
          "<code class="literal">sse2</code>",
          "<code class="literal">ht</code>",
          "<code class="literal">pni</code>",
          "<code class="literal">pclmul</code>",
          "<code class="literal">monitor</code>",
          "<code class="literal">ssse3</code>",
          "<code class="literal">fma3</code>",
          "<code class="literal">cx16</code>",
          "<code class="literal">sse4_1</code>",
          "<code class="literal">sse4_2</code>",
          "<code class="literal">movbe</code>",
          "<code class="literal">popcnt</code>",
          "<code class="literal">aes</code>",
          "<code class="literal">xsave</code>",
          "<code class="literal">osxsave</code>",
          "<code class="literal">avx</code>",
          "<code class="literal">f16c</code>",
          "<code class="literal">rdrand</code>",
          "<code class="literal">bmi1</code>",
          "<code class="literal">avx2</code>",
          "<code class="literal">bmi2</code>",
          "<code class="literal">rdseed</code>",
          "<code class="literal">adx</code>",
          "<code class="literal">sha_ni</code>",
          "<code class="literal">syscall</code>",
          "<code class="literal">rdtscp</code>",
          "<code class="literal">lm</code>",
          "<code class="literal">lahf_lm</code>",
          "<code class="literal">abm</code>",
          "<code class="literal">constant_tsc</code>".</p></dd><dt id="ConditionOSRelease="><span class="term"><code class="varname">ConditionOSRelease=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#ConditionOSRelease=">¶</a></dt><dd><p>Verify that a specific "<code class="literal">key=value</code>" pair is set in the host's
          <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a>.</p><p>Other than exact matching with "<code class="literal">=</code>", and "<code class="literal">!=</code>", relative
          comparisons are supported for versioned parameters (e.g. "<code class="literal">VERSION_ID</code>"). The
          comparator can be one of "<code class="literal">&lt;</code>", "<code class="literal">&lt;=</code>", "<code class="literal">=</code>",
          "<code class="literal">!=</code>", "<code class="literal">&gt;=</code>" and "<code class="literal">&gt;</code>".</p></dd><dt id="AssertArchitecture="><span class="term"><code class="varname">AssertArchitecture=</code>, </span><span class="term"><code class="varname">AssertVirtualization=</code>, </span><span class="term"><code class="varname">AssertHost=</code>, </span><span class="term"><code class="varname">AssertKernelCommandLine=</code>, </span><span class="term"><code class="varname">AssertKernelVersion=</code>, </span><span class="term"><code class="varname">AssertEnvironment=</code>, </span><span class="term"><code class="varname">AssertSecurity=</code>, </span><span class="term"><code class="varname">AssertCapability=</code>, </span><span class="term"><code class="varname">AssertACPower=</code>, </span><span class="term"><code class="varname">AssertNeedsUpdate=</code>, </span><span class="term"><code class="varname">AssertFirstBoot=</code>, </span><span class="term"><code class="varname">AssertPathExists=</code>, </span><span class="term"><code class="varname">AssertPathExistsGlob=</code>, </span><span class="term"><code class="varname">AssertPathIsDirectory=</code>, </span><span class="term"><code class="varname">AssertPathIsSymbolicLink=</code>, </span><span class="term"><code class="varname">AssertPathIsMountPoint=</code>, </span><span class="term"><code class="varname">AssertPathIsReadWrite=</code>, </span><span class="term"><code class="varname">AssertPathIsEncrypted=</code>, </span><span class="term"><code class="varname">AssertDirectoryNotEmpty=</code>, </span><span class="term"><code class="varname">AssertFileNotEmpty=</code>, </span><span class="term"><code class="varname">AssertFileIsExecutable=</code>, </span><span class="term"><code class="varname">AssertUser=</code>, </span><span class="term"><code class="varname">AssertGroup=</code>, </span><span class="term"><code class="varname">AssertControlGroupController=</code>, </span><span class="term"><code class="varname">AssertMemory=</code>, </span><span class="term"><code class="varname">AssertCPUs=</code>, </span><span class="term"><code class="varname">AssertOSRelease=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#AssertArchitecture=">¶</a></dt><dd><p>Similar to the <code class="varname">ConditionArchitecture=</code>,
          <code class="varname">ConditionVirtualization=</code>, …, condition settings described above, these settings
          add assertion checks to the start-up of the unit. However, unlike the conditions settings, any
          assertion setting that is not met results in failure of the start job (which means this is logged
          loudly). Note that hitting a configured assertion does not cause the unit to enter the
          "<code class="literal">failed</code>" state (or in fact result in any state change of the unit), it affects
          only the job queued for it. Use assertion expressions for units that cannot operate when specific
          requirements are not met, and when this is something the administrator or user should look
          into.</p></dd></dl></div></div></div><div class="refsect1"><a name="id-1.11"></a><h2 id="Mapping of unit properties to their inverses">Mapping of unit properties to their inverses<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Mapping%20of%20unit%20properties%20to%20their%20inverses">¶</a></h2><p>Unit settings that create a relationship with a second unit usually show up
    in properties of both units, for example in <span class="command"><strong>systemctl show</strong></span>
    output. In some cases the name of the property is the same as the name of the
    configuration setting, but not always. This table lists the properties
    that are shown on two units which are connected through some dependency, and shows
    which property on "source" unit corresponds to which property on the "target" unit.
    </p><div class="table"><a name="id-1.11.3"></a><p class="title"><b>Table 3. 
        "Forward" and "reverse" unit properties
      </b></p><div class="table-contents"><table class="table" summary='
        "Forward" and "reverse" unit properties
      ' border="1"><colgroup><col class="forward"><col class="reverse"><col class="fuse"><col class="ruse"></colgroup><thead><tr><th>"Forward" property</th><th>"Reverse" property</th><th colspan="2" valign="middle">Where used</th></tr></thead><tbody><tr><td><code class="varname">Before=</code></td><td><code class="varname">After=</code></td><td rowspan="2" colspan="2" valign="middle">[Unit] section</td></tr><tr><td><code class="varname">After=</code></td><td><code class="varname">Before=</code></td></tr><tr><td><code class="varname">Requires=</code></td><td><code class="varname">RequiredBy=</code></td><td>[Unit] section</td><td>[Install] section</td></tr><tr><td><code class="varname">Wants=</code></td><td><code class="varname">WantedBy=</code></td><td>[Unit] section</td><td>[Install] section</td></tr><tr><td><code class="varname">PartOf=</code></td><td><code class="varname">ConsistsOf=</code></td><td>[Unit] section</td><td>an automatic property</td></tr><tr><td><code class="varname">BindsTo=</code></td><td><code class="varname">BoundBy=</code></td><td>[Unit] section</td><td>an automatic property</td></tr><tr><td><code class="varname">Requisite=</code></td><td><code class="varname">RequisiteOf=</code></td><td>[Unit] section</td><td>an automatic property</td></tr><tr><td><code class="varname">Triggers=</code></td><td><code class="varname">TriggeredBy=</code></td><td colspan="2" valign="middle">Automatic properties, see notes below</td></tr><tr><td><code class="varname">Conflicts=</code></td><td><code class="varname">ConflictedBy=</code></td><td>[Unit] section</td><td>an automatic property</td></tr><tr><td><code class="varname">PropagatesReloadTo=</code></td><td><code class="varname">ReloadPropagatedFrom=</code></td><td rowspan="2" colspan="2" valign="middle">[Unit] section</td></tr><tr><td><code class="varname">ReloadPropagatedFrom=</code></td><td><code class="varname">PropagatesReloadTo=</code></td></tr><tr><td><code class="varname">Following=</code></td><td>n/a</td><td>An automatic property</td><td class="auto-generated"> </td></tr></tbody></table></div></div><br class="table-break"><p>Note: <code class="varname">WantedBy=</code> and <code class="varname">RequiredBy=</code> are
    used in the [Install] section to create symlinks in <code class="filename">.wants/</code>
    and <code class="filename">.requires/</code> directories. They cannot be used directly as a
    unit configuration setting.</p><p>Note: <code class="varname">ConsistsOf=</code>, <code class="varname">BoundBy=</code>,
    <code class="varname">RequisiteOf=</code>, <code class="varname">ConflictedBy=</code> are created
    implicitly along with their reverses and cannot be specified directly.</p><p>Note: <code class="varname">Triggers=</code> is created implicitly between a socket,
    path unit, or an automount unit, and the unit they activate. By default a unit
    with the same name is triggered, but this can be overridden using
    <code class="varname">Sockets=</code>, <code class="varname">Service=</code>, and <code class="varname">Unit=</code>
    settings. See
    <a href="systemd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd.service</span>(5)</span></a>,
    <a href="systemd.socket.html#"><span class="citerefentry"><span class="refentrytitle">systemd.socket</span>(5)</span></a>,
    <a href="systemd.path.html#"><span class="citerefentry"><span class="refentrytitle">systemd.path</span>(5)</span></a>,
    and
    <a href="systemd.automount.html#"><span class="citerefentry"><span class="refentrytitle">systemd.automount</span>(5)</span></a>
    for details. <code class="varname">TriggeredBy=</code> is created implicitly on the
    triggered unit.</p><p>Note: <code class="varname">Following=</code> is used to group device aliases and points to the
    "primary" device unit that systemd is using to track device state, usually corresponding to a
    sysfs path. It does not show up in the "target" unit.</p></div><div class="refsect1"><a name="id-1.12"></a><h2 id="[Install] Section Options">[Install] Section Options<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#%5BInstall%5D%20Section%20Options">¶</a></h2><p>Unit files may include an [Install] section, which carries installation information for
    the unit. This section is not interpreted by
    <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a> during runtime; it is
    used by the <span class="command"><strong>enable</strong></span> and <span class="command"><strong>disable</strong></span> commands of the
    <a href="systemctl.html#"><span class="citerefentry"><span class="refentrytitle">systemctl</span>(1)</span></a> tool during
    installation of a unit.</p><div class="variablelist"><dl class="variablelist"><dt id="Alias="><span class="term"><code class="varname">Alias=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Alias=">¶</a></dt><dd><p>A space-separated list of additional names this unit shall be installed under. The names listed
        here must have the same suffix (i.e. type) as the unit filename. This option may be specified more than once,
        in which case all listed names are used. At installation time, <span class="command"><strong>systemctl enable</strong></span> will create
        symlinks from these names to the unit filename. Note that not all unit types support such alias names, and this
        setting is not supported for them. Specifically, mount, slice, swap, and automount units do not support
        aliasing.</p></dd><dt id="WantedBy="><span class="term"><code class="varname">WantedBy=</code>, </span><span class="term"><code class="varname">RequiredBy=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#WantedBy=">¶</a></dt><dd><p>This option may be used more than once, or a
        space-separated list of unit names may be given. A symbolic
        link is created in the <code class="filename">.wants/</code> or
        <code class="filename">.requires/</code> directory of each of the
        listed units when this unit is installed by <span class="command"><strong>systemctl
        enable</strong></span>. This has the effect that a dependency of
        type <code class="varname">Wants=</code> or <code class="varname">Requires=</code>
        is added from the listed unit to the current unit. The primary
        result is that the current unit will be started when the
        listed unit is started. See the description of
        <code class="varname">Wants=</code> and <code class="varname">Requires=</code> in
        the [Unit] section for details.</p><p><span class="command"><strong>WantedBy=foo.service</strong></span> in a service
        <code class="filename">bar.service</code> is mostly equivalent to
        <span class="command"><strong>Alias=foo.service.wants/bar.service</strong></span> in the
        same file. In case of template units, <span class="command"><strong>systemctl
        enable</strong></span> must be called with an instance name, and
        this instance will be added to the
        <code class="filename">.wants/</code> or
        <code class="filename">.requires/</code> list of the listed unit. E.g.
        <span class="command"><strong>WantedBy=getty.target</strong></span> in a service
        <code class="filename">getty@.service</code> will result in
        <span class="command"><strong>systemctl enable getty@tty2.service</strong></span>
        creating a
        <code class="filename">getty.target.wants/getty@tty2.service</code>
        link to <code class="filename">getty@.service</code>.
        </p></dd><dt id="Also="><span class="term"><code class="varname">Also=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#Also=">¶</a></dt><dd><p>Additional units to install/deinstall when
        this unit is installed/deinstalled. If the user requests
        installation/deinstallation of a unit with this option
        configured, <span class="command"><strong>systemctl enable</strong></span> and
        <span class="command"><strong>systemctl disable</strong></span> will automatically
        install/uninstall units listed in this option as well.</p><p>This option may be used more than once, or a
        space-separated list of unit names may be
        given.</p></dd><dt id="DefaultInstance="><span class="term"><code class="varname">DefaultInstance=</code></span><a class="headerlink" title="Permalink to this term" href="systemd.unit.html#DefaultInstance=">¶</a></dt><dd><p>In template unit files, this specifies for
        which instance the unit shall be enabled if the template is
        enabled without any explicitly set instance. This option has
        no effect in non-template unit files. The specified string
        must be usable as instance identifier.</p></dd></dl></div><p>The following specifiers are interpreted in the Install section:
    %a, %b, %B, %g, %G, %H, %i, %j, %l, %m, %n, %N, %o, %p, %u, %U, %v, %w, %W, %%.
    For their meaning see the next section.</p></div><div class="refsect1"><a name="id-1.13"></a><h2 id="Specifiers">Specifiers<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Specifiers">¶</a></h2><p>Many settings resolve specifiers which may be used to write
    generic unit files referring to runtime or unit parameters that
    are replaced when the unit files are loaded. Specifiers must be known
    and resolvable for the setting to be valid. The following
    specifiers are understood:</p><div class="table"><a name="id-1.13.3"></a><p class="title"><b>Table 4. Specifiers available in unit files</b></p><div class="table-contents"><table class="table" summary="Specifiers available in unit files" border="1"><colgroup><col align="left" class="spec"><col align="left" class="mean"><col align="left" class="detail"></colgroup><thead><tr><th align="left">Specifier</th><th align="left">Meaning</th><th align="left">Details</th></tr></thead><tbody><tr><td align="left">"<code class="literal">%a</code>"</td><td align="left">Architecture</td><td align="left">A short string identifying the architecture of the local system. A string such as <code class="constant">x86</code>, <code class="constant">x86-64</code> or <code class="constant">arm64</code>. See the architectures defined for <code class="varname">ConditionArchitecture=</code> above for a full list.</td></tr><tr><td align="left"><a name="A"></a>"<code class="literal">%A</code>"</td><td align="left">Operating system image version</td><td align="left">The operating system image version identifier of the running system, as read from the <code class="varname">IMAGE_VERSION=</code> field of <code class="filename">/etc/os-release</code>. If not set, resolves to an empty string. See <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> for more information.</td></tr><tr><td align="left"><a name="b"></a>"<code class="literal">%b</code>"</td><td align="left">Boot ID</td><td align="left">The boot ID of the running system, formatted as string. See <a href="http://man7.org/linux/man-pages/man4/random.4.html"><span class="citerefentry"><span class="refentrytitle">random</span>(4)</span></a> for more information.</td></tr><tr><td align="left"><a name="B"></a>"<code class="literal">%B</code>"</td><td align="left">Operating system build ID</td><td align="left">The operating system build identifier of the running system, as read from the <code class="varname">BUILD_ID=</code> field of <code class="filename">/etc/os-release</code>. If not set, resolves to an empty string. See <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> for more information.</td></tr><tr><td align="left">"<code class="literal">%C</code>"</td><td align="left">Cache directory root</td><td align="left">This is either <code class="filename">/var/cache</code> (for the system manager) or the path "<code class="literal">$XDG_CACHE_HOME</code>" resolves to (for user managers).</td></tr><tr><td align="left">"<code class="literal">%E</code>"</td><td align="left">Configuration directory root</td><td align="left">This is either <code class="filename">/etc/</code> (for the system manager) or the path "<code class="literal">$XDG_CONFIG_HOME</code>" resolves to (for user managers).</td></tr><tr><td align="left">"<code class="literal">%f</code>"</td><td align="left">Unescaped filename</td><td align="left">This is either the unescaped instance name (if applicable) with <code class="filename">/</code> prepended (if applicable), or the unescaped prefix name prepended with <code class="filename">/</code>. This implements unescaping according to the rules for escaping absolute file system paths discussed above.</td></tr><tr><td align="left">"<code class="literal">%g</code>"</td><td align="left">User group</td><td align="left">This is the name of the group running the service manager instance. In case of the system manager this resolves to "<code class="literal">root</code>".</td></tr><tr><td align="left">"<code class="literal">%G</code>"</td><td align="left">User GID</td><td align="left">This is the numeric GID of the user running the service manager instance. In case of the system manager this resolves to "<code class="literal">0</code>".</td></tr><tr><td align="left">"<code class="literal">%h</code>"</td><td align="left">User home directory</td><td align="left">This is the home directory of the <span class="emphasis"><em>user running the service manager instance</em></span>. In case of the system manager this resolves to "<code class="literal">/root</code>".

Note that this setting is <span class="emphasis"><em>not</em></span> influenced by the <code class="varname">User=</code> setting configurable in the [Service] section of the service unit.</td></tr><tr><td align="left">"<code class="literal">%H</code>"</td><td align="left">Host name</td><td align="left">The hostname of the running system at the point in time the unit configuration is loaded.</td></tr><tr><td align="left">"<code class="literal">%i</code>"</td><td align="left">Instance name</td><td align="left">For instantiated units this is the string between the first "<code class="literal">@</code>" character and the type suffix. Empty for non-instantiated units.</td></tr><tr><td align="left">"<code class="literal">%I</code>"</td><td align="left">Unescaped instance name</td><td align="left">Same as "<code class="literal">%i</code>", but with escaping undone.</td></tr><tr><td align="left">"<code class="literal">%j</code>"</td><td align="left">Final component of the prefix</td><td align="left">This is the string between the last "<code class="literal">-</code>" and the end of the prefix name. If there is no "<code class="literal">-</code>", this is the same as "<code class="literal">%p</code>".</td></tr><tr><td align="left">"<code class="literal">%J</code>"</td><td align="left">Unescaped final component of the prefix</td><td align="left">Same as "<code class="literal">%j</code>", but with escaping undone.</td></tr><tr><td align="left">"<code class="literal">%l</code>"</td><td align="left">Short host name</td><td align="left">The hostname of the running system at the point in time the unit configuration is loaded, truncated at the first dot to remove any domain component.</td></tr><tr><td align="left">"<code class="literal">%L</code>"</td><td align="left">Log directory root</td><td align="left">This is either <code class="filename">/var/log</code> (for the system manager) or the path "<code class="literal">$XDG_CONFIG_HOME</code>" resolves to with <code class="filename">/log</code> appended (for user managers).</td></tr><tr><td align="left"><a name="m"></a>"<code class="literal">%m</code>"</td><td align="left">Machine ID</td><td align="left">The machine ID of the running system, formatted as string. See <a href="machine-id.html#"><span class="citerefentry"><span class="refentrytitle">machine-id</span>(5)</span></a> for more information.</td></tr><tr><td align="left"><a name="M"></a>"<code class="literal">%M</code>"</td><td align="left">Operating system image identifier</td><td align="left">The operating system image identifier of the running system, as read from the <code class="varname">IMAGE_ID=</code> field of <code class="filename">/etc/os-release</code>. If not set, resolves to an empty string. See <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> for more information.</td></tr><tr><td align="left">"<code class="literal">%n</code>"</td><td align="left">Full unit name</td><td align="left"> </td></tr><tr><td align="left">"<code class="literal">%N</code>"</td><td align="left">Full unit name</td><td align="left">Same as "<code class="literal">%n</code>", but with the type suffix removed.</td></tr><tr><td align="left"><a name="o"></a>"<code class="literal">%o</code>"</td><td align="left">Operating system ID</td><td align="left">The operating system identifier of the running system, as read from the <code class="varname">ID=</code> field of <code class="filename">/etc/os-release</code>. See <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> for more information.</td></tr><tr><td align="left">"<code class="literal">%p</code>"</td><td align="left">Prefix name</td><td align="left">For instantiated units, this refers to the string before the first "<code class="literal">@</code>" character of the unit name. For non-instantiated units, same as "<code class="literal">%N</code>".</td></tr><tr><td align="left">"<code class="literal">%P</code>"</td><td align="left">Unescaped prefix name</td><td align="left">Same as "<code class="literal">%p</code>", but with escaping undone.</td></tr><tr><td align="left">"<code class="literal">%s</code>"</td><td align="left">User shell</td><td align="left">This is the shell of the user running the service manager instance. In case of the system manager this resolves to "<code class="literal">/bin/sh</code>".</td></tr><tr><td align="left">"<code class="literal">%S</code>"</td><td align="left">State directory root</td><td align="left">This is either <code class="filename">/var/lib</code> (for the system manager) or the path "<code class="literal">$XDG_CONFIG_HOME</code>" resolves to (for user managers).</td></tr><tr><td align="left">"<code class="literal">%t</code>"</td><td align="left">Runtime directory root</td><td align="left">This is either <code class="filename">/run/</code> (for the system manager) or the path "<code class="literal">$XDG_RUNTIME_DIR</code>" resolves to (for user managers).</td></tr><tr><td align="left"><a name="T"></a>"<code class="literal">%T</code>"</td><td align="left">Directory for temporary files</td><td align="left">This is either <code class="filename">/tmp</code> or the path "<code class="literal">$TMPDIR</code>", "<code class="literal">$TEMP</code>" or "<code class="literal">$TMP</code>" are set to. (Note that the directory may be specified without a trailing slash.)</td></tr><tr><td align="left">"<code class="literal">%u</code>"</td><td align="left">User name</td><td align="left">This is the name of the <span class="emphasis"><em>user running the service manager instance</em></span>. In case of the system manager this resolves to "<code class="literal">root</code>".

Note that this setting is <span class="emphasis"><em>not</em></span> influenced by the <code class="varname">User=</code> setting configurable in the [Service] section of the service unit.</td></tr><tr><td align="left">"<code class="literal">%U</code>"</td><td align="left">User UID</td><td align="left">This is the numeric UID of the <span class="emphasis"><em>user running the service manager instance</em></span>. In case of the system manager this resolves to "<code class="literal">0</code>".

Note that this setting is <span class="emphasis"><em>not</em></span> influenced by the <code class="varname">User=</code> setting configurable in the [Service] section of the service unit.</td></tr><tr><td align="left"><a name="v"></a>"<code class="literal">%v</code>"</td><td align="left">Kernel release</td><td align="left">Identical to <span class="command"><strong>uname -r</strong></span> output.</td></tr><tr><td align="left"><a name="V"></a>"<code class="literal">%V</code>"</td><td align="left">Directory for larger and persistent temporary files</td><td align="left">This is either <code class="filename">/var/tmp</code> or the path "<code class="literal">$TMPDIR</code>", "<code class="literal">$TEMP</code>" or "<code class="literal">$TMP</code>" are set to. (Note that the directory may be specified without a trailing slash.)</td></tr><tr><td align="left"><a name="w"></a>"<code class="literal">%w</code>"</td><td align="left">Operating system version ID</td><td align="left">The operating system version identifier of the running system, as read from the <code class="varname">VERSION_ID=</code> field of <code class="filename">/etc/os-release</code>. If not set, resolves to an empty string. See <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> for more information.</td></tr><tr><td align="left"><a name="W"></a>"<code class="literal">%W</code>"</td><td align="left">Operating system variant ID</td><td align="left">The operating system variant identifier of the running system, as read from the <code class="varname">VARIANT_ID=</code> field of <code class="filename">/etc/os-release</code>. If not set, resolves to an empty string. See <a href="os-release.html#"><span class="citerefentry"><span class="refentrytitle">os-release</span>(5)</span></a> for more information.</td></tr><tr><td align="left"><a name="percent"></a>"<code class="literal">%%</code>"</td><td align="left">Single percent sign</td><td align="left">Use "<code class="literal">%%</code>" in place of "<code class="literal">%</code>" to specify a single percent sign.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsect1"><a name="id-1.14"></a><h2 id="Examples">Examples<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#Examples">¶</a></h2><div class="example"><a name="id-1.14.2"></a><p class="title"><b>Example 1. Allowing units to be enabled</b></p><div class="example-contents"><p>The following snippet (highlighted) allows a unit (e.g.
      <code class="filename">foo.service</code>) to be enabled via
      <span class="command"><strong>systemctl enable</strong></span>:</p><pre class="programlisting">[Unit]
Description=Foo

[Service]
ExecStart=/usr/sbin/foo-daemon

<span class="emphasis"><em>[Install]</em></span>
<span class="emphasis"><em>WantedBy=multi-user.target</em></span></pre><p>After running <span class="command"><strong>systemctl enable</strong></span>, a
      symlink
      <code class="filename">/etc/systemd/system/multi-user.target.wants/foo.service</code>
      linking to the actual unit will be created. It tells systemd to
      pull in the unit when starting
      <code class="filename">multi-user.target</code>. The inverse
      <span class="command"><strong>systemctl disable</strong></span> will remove that symlink
      again.</p></div></div><br class="example-break"><div class="example"><a name="id-1.14.3"></a><p class="title"><b>Example 2. Overriding vendor settings</b></p><div class="example-contents"><p>There are two methods of overriding vendor settings in
      unit files: copying the unit file from
      <code class="filename">/usr/lib/systemd/system</code> to
      <code class="filename">/etc/systemd/system</code> and modifying the
      chosen settings. Alternatively, one can create a directory named
      <code class="filename"><em class="replaceable"><code>unit</code></em>.d/</code> within
      <code class="filename">/etc/systemd/system</code> and place a drop-in
      file <code class="filename"><em class="replaceable"><code>name</code></em>.conf</code>
      there that only changes the specific settings one is interested
      in. Note that multiple such drop-in files are read if
      present, processed in lexicographic order of their filename.</p><p>The advantage of the first method is that one easily
      overrides the complete unit, the vendor unit is not parsed at
      all anymore. It has the disadvantage that improvements to the
      unit file by the vendor are not automatically incorporated on
      updates.</p><p>The advantage of the second method is that one only
      overrides the settings one specifically wants, where updates to
      the unit by the vendor automatically apply. This has the
      disadvantage that some future updates by the vendor might be
      incompatible with the local changes.</p><p>This also applies for user instances of systemd, but with
      different locations for the unit files. See the section on unit
      load paths for further details.</p><p>Suppose there is a vendor-supplied unit
      <code class="filename">/usr/lib/systemd/system/httpd.service</code> with
      the following contents:</p><pre class="programlisting">[Unit]
Description=Some HTTP server
After=remote-fs.target sqldb.service
Requires=sqldb.service
AssertPathExists=/srv/webserver

[Service]
Type=notify
ExecStart=/usr/sbin/some-fancy-httpd-server
Nice=5

[Install]
WantedBy=multi-user.target</pre><p>Now one wants to change some settings as an administrator:
      firstly, in the local setup, <code class="filename">/srv/webserver</code>
      might not exist, because the HTTP server is configured to use
      <code class="filename">/srv/www</code> instead. Secondly, the local
      configuration makes the HTTP server also depend on a memory
      cache service, <code class="filename">memcached.service</code>, that
      should be pulled in (<code class="varname">Requires=</code>) and also be
      ordered appropriately (<code class="varname">After=</code>). Thirdly, in
      order to harden the service a bit more, the administrator would
      like to set the <code class="varname">PrivateTmp=</code> setting (see
      <a href="systemd.exec.html#"><span class="citerefentry"><span class="refentrytitle">systemd.exec</span>(5)</span></a>
      for details). And lastly, the administrator would like to reset
      the niceness of the service to its default value of 0.</p><p>The first possibility is to copy the unit file to
      <code class="filename">/etc/systemd/system/httpd.service</code> and
      change the chosen settings:</p><pre class="programlisting">[Unit]
Description=Some HTTP server
After=remote-fs.target sqldb.service <span class="emphasis"><em>memcached.service</em></span>
Requires=sqldb.service <span class="emphasis"><em>memcached.service</em></span>
AssertPathExists=<span class="emphasis"><em>/srv/www</em></span>

[Service]
Type=notify
ExecStart=/usr/sbin/some-fancy-httpd-server
<span class="emphasis"><em>Nice=0</em></span>
<span class="emphasis"><em>PrivateTmp=yes</em></span>

[Install]
WantedBy=multi-user.target</pre><p>Alternatively, the administrator could create a drop-in
      file
      <code class="filename">/etc/systemd/system/httpd.service.d/local.conf</code>
      with the following contents:</p><pre class="programlisting">[Unit]
After=memcached.service
Requires=memcached.service
# Reset all assertions and then re-add the condition we want
AssertPathExists=
AssertPathExists=/srv/www

[Service]
Nice=0
PrivateTmp=yes</pre><p>Note that for drop-in files, if one wants to remove
      entries from a setting that is parsed as a list (and is not a
      dependency), such as <code class="varname">AssertPathExists=</code> (or
      e.g. <code class="varname">ExecStart=</code> in service units), one needs
      to first clear the list before re-adding all entries except the
      one that is to be removed. Dependencies (<code class="varname">After=</code>, etc.)
      cannot be reset to an empty list, so dependencies can only be
      added in drop-ins. If you want to remove dependencies, you have
      to override the entire unit.</p></div></div><br class="example-break"><div class="example"><a name="id-1.14.4"></a><p class="title"><b>Example 3. Top level drop-ins with template units</b></p><div class="example-contents"><p>Top level per-type drop-ins can be used to change some aspect of
      all units of a particular type. For example by creating the
      <code class="filename">/etc/systemd/system/service.d/</code>
      directory with a drop-in file, the contents of the drop-in file can be
      applied to all service units. We can take this further by having the
      top-level drop-in instantiate a secondary helper unit. Consider for
      example the following set of units and drop-in files where we install
      an <code class="varname">OnFailure=</code> dependency for all service units.</p><p>
      <code class="filename">/etc/systemd/system/failure-handler@.service</code>:</p><pre class="programlisting">[Unit]
Description=My failure handler for %i

[Service]
Type=oneshot
# Perform some special action for when %i exits unexpectedly.
ExecStart=/usr/sbin/myfailurehandler %i
     </pre><p>We can then add an instance of
     <code class="filename">failure-handler@.service</code> as an
     <code class="varname">OnFailure=</code> dependency for all service units.</p><p>
    <code class="filename">/etc/systemd/system/service.d/10-all.conf</code>:</p><pre class="programlisting">[Unit]
OnFailure=failure-handler@%N.service
    </pre><p>Now, after running <span class="command"><strong>systemctl daemon-reload</strong></span> all
    services will have acquired an <code class="varname">OnFailure=</code> dependency on
    <code class="filename">failure-handler@%N.service</code>. The
    template instance units will also have gained the dependency which results
    in the creation of a recursive dependency chain. We can break the chain by
    disabling the drop-in for the template instance units via a symlink to
    <code class="filename">/dev/null</code>:</p><pre class="programlisting">
<span class="command"><strong>mkdir /etc/systemd/system/failure-handler@.service.d/</strong></span>
<span class="command"><strong>ln -s /dev/null /etc/systemd/system/failure-handler@.service.d/10-all.conf</strong></span>
<span class="command"><strong>systemctl daemon-reload</strong></span>
    </pre><p>This ensures that if a <code class="filename">failure-handler@.service</code> instance fails it will not trigger an instance named
    <code class="filename">failure-handler@failure-handler.service</code>.</p></div></div><br class="example-break"></div><div class="refsect1"><a name="id-1.15"></a><h2 id="See Also">See Also<a class="headerlink" title="Permalink to this headline" href="systemd.unit.html#See%20Also">¶</a></h2><p>
      <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a>,
      <a href="systemctl.html#"><span class="citerefentry"><span class="refentrytitle">systemctl</span>(1)</span></a>,
      <a href="systemd-system.conf.html#"><span class="citerefentry"><span class="refentrytitle">systemd-system.conf</span>(5)</span></a>,
      <a href="systemd.special.html#"><span class="citerefentry"><span class="refentrytitle">systemd.special</span>(7)</span></a>,
      <a href="systemd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd.service</span>(5)</span></a>,
      <a href="systemd.socket.html#"><span class="citerefentry"><span class="refentrytitle">systemd.socket</span>(5)</span></a>,
      <a href="systemd.device.html#"><span class="citerefentry"><span class="refentrytitle">systemd.device</span>(5)</span></a>,
      <a href="systemd.mount.html#"><span class="citerefentry"><span class="refentrytitle">systemd.mount</span>(5)</span></a>,
      <a href="systemd.automount.html#"><span class="citerefentry"><span class="refentrytitle">systemd.automount</span>(5)</span></a>,
      <a href="systemd.swap.html#"><span class="citerefentry"><span class="refentrytitle">systemd.swap</span>(5)</span></a>,
      <a href="systemd.target.html#"><span class="citerefentry"><span class="refentrytitle">systemd.target</span>(5)</span></a>,
      <a href="systemd.path.html#"><span class="citerefentry"><span class="refentrytitle">systemd.path</span>(5)</span></a>,
      <a href="systemd.timer.html#"><span class="citerefentry"><span class="refentrytitle">systemd.timer</span>(5)</span></a>,
      <a href="systemd.scope.html#"><span class="citerefentry"><span class="refentrytitle">systemd.scope</span>(5)</span></a>,
      <a href="systemd.slice.html#"><span class="citerefentry"><span class="refentrytitle">systemd.slice</span>(5)</span></a>,
      <a href="systemd.time.html#"><span class="citerefentry"><span class="refentrytitle">systemd.time</span>(7)</span></a>,
      <a href="systemd-analyze.html#"><span class="citerefentry"><span class="refentrytitle">systemd-analyze</span>(1)</span></a>,
      <a href="http://man7.org/linux/man-pages/man7/capabilities.7.html"><span class="citerefentry"><span class="refentrytitle">capabilities</span>(7)</span></a>,
      <a href="systemd.directives.html#"><span class="citerefentry"><span class="refentrytitle">systemd.directives</span>(7)</span></a>,
      <a href="http://man7.org/linux/man-pages/man1/uname.1.html"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a>
    </p></div></div></body></html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_bus_set_fd</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html">Index </a>·
  <a href="systemd.directives.html">Directives </a><span style="float:right">systemd 249</span><hr><div class="refentry"><a name="sd_bus_set_fd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>sd_bus_set_fd — Set the file descriptors to use for bus communication</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-bus.h&gt;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">sd_bus_set_fd</b>(</code></td><td>sd_bus *<var class="pdparam">bus</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">input_fd</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">output_fd</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="id-1.5"></a><h2 id="Description">Description<a class="headerlink" title="Permalink to this headline" href="sd_bus_set_fd.html#Description">¶</a></h2><p><code class="function">sd_bus_set_fd()</code> sets the file descriptors used to communicate by a bus
    connection object. Both <em class="parameter"><code>input_fd</code></em> and <em class="parameter"><code>output_fd</code></em> must be
    valid file descriptors, referring to stream-based file objects (e.g. a stream socket, a pair of pipes or
    FIFOs, or even a TTY device). <em class="parameter"><code>input_fd</code></em> must be readable, and
    <em class="parameter"><code>output_fd</code></em> must be writable. The same file descriptor may be used (and typically is
    used) as both the input and the output file descriptor. This function must be called before the bus
    connection is started via
    <a href="sd_bus_start.html#"><span class="citerefentry"><span class="refentrytitle">sd_bus_start</span>(3)</span></a>.</p><p>The bus connection object will take possession of the passed file descriptors and will close them
    automatically when it is freed. Use
    <a href="sd_bus_set_close_on_exit.html#"><span class="citerefentry"><span class="refentrytitle">sd_bus_set_close_on_exit</span>(3)</span></a>
    to turn off this behaviour.</p></div><div class="refsect1"><a name="id-1.6"></a><h2 id="Return Value">Return Value<a class="headerlink" title="Permalink to this headline" href="sd_bus_set_fd.html#Return%20Value">¶</a></h2><p>On success, <code class="function">sd_bus_set_fd()</code> returns a non-negative integer. On
    failure, it returns a negative errno-style error code.</p><div class="refsect2"><a name="id-1.6.3"></a><h3 id="Errors">Errors<a class="headerlink" title="Permalink to this headline" href="sd_bus_set_fd.html#Errors">¶</a></h3><p>Returned errors may indicate the following problems:</p><div class="variablelist"><dl class="variablelist"><dt id="-EINVAL"><span class="term"><code class="constant">-EINVAL</code></span><a class="headerlink" title="Permalink to this term" href="sd_bus_set_fd.html#-EINVAL">¶</a></dt><dd><p>An invalid bus object was passed.</p></dd><dt id="-ECHILD"><span class="term"><code class="constant">-ECHILD</code></span><a class="headerlink" title="Permalink to this term" href="sd_bus_set_fd.html#-ECHILD">¶</a></dt><dd><p>The bus connection was allocated in a parent process and is being reused
          in a child process after <code class="function">fork()</code>.</p></dd><dt id="-EBADF"><span class="term"><code class="constant">-EBADF</code></span><a class="headerlink" title="Permalink to this term" href="sd_bus_set_fd.html#-EBADF">¶</a></dt><dd><p>An invalid file descriptor was passed to
          <code class="function">sd_bus_set_fd()</code>.</p></dd><dt id="-ENOPKG"><span class="term"><code class="constant">-ENOPKG</code></span><a class="headerlink" title="Permalink to this term" href="sd_bus_set_fd.html#-ENOPKG">¶</a></dt><dd><p>The bus cannot be resolved.</p></dd><dt id="-EPERM"><span class="term"><code class="constant">-EPERM</code></span><a class="headerlink" title="Permalink to this term" href="sd_bus_set_fd.html#-EPERM">¶</a></dt><dd><p>The bus connection has already been started.</p></dd></dl></div></div></div><div class="refsect1"><a name="id-1.7"></a><h2 id="Notes">Notes<a class="headerlink" title="Permalink to this headline" href="sd_bus_set_fd.html#Notes">¶</a></h2><p><a name="pkgconfig-text"></a>These APIs are implemented as a shared
  library, which can be compiled and linked to with the
  <code class="constant">libsystemd</code> <a href="http://linux.die.net/man/1/pkg-config"><span class="citerefentry"><span class="refentrytitle">pkg-config</span>(1)</span></a>
  file.</p></div><div class="refsect1"><a name="id-1.8"></a><h2 id="See Also">See Also<a class="headerlink" title="Permalink to this headline" href="sd_bus_set_fd.html#See%20Also">¶</a></h2><p>
      <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a>,
      <a href="sd-bus.html#"><span class="citerefentry"><span class="refentrytitle">sd-bus</span>(3)</span></a>,
      <a href="sd_bus_get_fd.html#"><span class="citerefentry"><span class="refentrytitle">sd_bus_get_fd</span>(3)</span></a>,
      <a href="sd_bus_start.html#"><span class="citerefentry"><span class="refentrytitle">sd_bus_start</span>(3)</span></a>
    </p></div></div></body></html>

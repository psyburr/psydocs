<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49925874-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-49925874-3');
  </script>

  <meta charset='utf-8'>
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Git - Setting Up the Server</title>

  <link href='../favicon.ico' rel='shortcut icon' type='image/x-icon'>

  <link rel="stylesheet" media="screen" href="../application-317ee030890d2caf96a53cbcc2a67040b748b2506d55661fc9c6754d0a024f59.css" />
  <script src="../modernize-b3ebe0c31c24f230dc62179d3e1030d2e57a53b1668d9382c0a27dbd44a94beb.js"></script>
  <!--[if (gte IE 6)&(lte IE 8)]>
  <script src="/javascripts/selectivizr-min.js"></script>
  <![endif]-->

</head>

<body id="documentation">

  <div class="inner">
    <header>

  <a href="https://git-scm.com/"><img src="../logo@2x.png" width="110" height="46" alt="Git" /></a>
  <span id="tagline"></span>
  <script type="text/javascript">
    var taglines = ["fast-version-control","everything-is-local","distributed-even-if-your-workflow-isnt","local-branching-on-the-cheap","distributed-is-the-new-centralized"];
    var tagline = taglines[Math.floor(Math.random() * taglines.length)];
    document.getElementById('tagline').innerHTML = '--' + tagline;
  </script>
  <form id="search" action="https://git-scm.com/search/results">
    <input id="search-text" name="search" placeholder="Search entire site..." autocomplete="off" type="text" />
  </form>
  <div id="search-results"></div>

</header>

  </div> <!-- .inner -->

    <div class="inner">
      <div id="content-wrapper">
        <button class="sidebar-btn"></button>
<aside class="sidebar" id="sidebar">
  <nav>
    <ul>
      <li>
        <a href="https://git-scm.com/about">About</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/about">Branching and Merging</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/small-and-fast">Small and Fast</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/distributed">Distributed</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/info-assurance">Data Assurance</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/staging-area">Staging Area</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/free-and-open-source">Free and Open Source</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/trademark">Trademark</a>
          </li>
        </ul>
      </li>
      <li>
        <a class="active" href="https://git-scm.com/doc">Documentation</a>
        <ul class="expanded">
          <li>
            <a href="https://git-scm.com/docs">Reference</a>
          </li>
          <li>
            <a class="active" href="https://git-scm.com/book">Book</a>
          </li>
          <li>
            <a href="https://git-scm.com/videos">Videos</a>
          </li>
          <li>
            <a href="https://git-scm.com/doc/ext">External Links</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/downloads">Downloads</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/downloads/guis">GUI Clients</a>
          </li>
          <li>
            <a href="https://git-scm.com/downloads/logos">Logos</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/community">Community</a>
      </li>
    </ul>
      <hr class="sidebar">
        <p>
This book is available in
  <a href="https://git-scm.com/book/en">English</a>.
</p>
<p>
  Full translation available in
  <table>
    <tr><td><a href="https://git-scm.com/book/az">azərbaycan dili</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/bg">български език</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/de">Deutsch</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/es">Español</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/fr">Français</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/gr">Ελληνικά</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ja">日本語</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ko">한국어</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/nl">Nederlands</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ru">Русский</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/sl">Slovenščina</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/tl">Tagalog</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/uk">Українська</a></td></tr>
    <tr><td><a href="https://git-scm.com/book/zh">简体中文</a>,</td></tr>
  </table>
</p>
<p>
  Partial translations available in
  <table>
    <tr><td><a href="https://git-scm.com/book/cs">Čeština</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/mk">Македонски</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/pl">Polski</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/sr">Српски</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/uz">Ўзбекча</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/zh-tw">繁體中文</a>,</td></tr>
  </table>
</p>
<p>
  Translations started for
  <table>
    <tr><td><a href="https://git-scm.com/book/be">Беларуская</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/fa" dir="rtl">فارسی</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/id">Indonesian</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/it">Italiano</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ms">Bahasa Melayu</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/pt-br">Português (Brasil)</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/pt-pt">Português (Portugal)</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/sv">Svenska</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/tr">Türkçe</a>.</td></tr>
  </table>
</p>
<hr class="sidebar"/>
<p>
The source of this book is <a href="https://github.com/progit/progit2">hosted on GitHub.</a></br>
Patches, suggestions and comments are welcome.
</p>


  </nav>
</aside>

        <div id="content">
          

<div id='book-chapters'>
  <a class="dropdown-trigger" id="book-chapters-trigger" data-panel-id="chapters-dropdown" href="_setting_up_server.html#">Chapters ▾</a>
<div class='dropdown-panel' id='chapters-dropdown'>
  <div class="three-column">
    <div class='column-left'>
      <ol class='book-toc'>
  <li class='chapter'>
  <h2>1. <a href="ch01-getting-started.html">Getting Started</a></h2>
    <ol>
        <li>
          1.1
          <a href="ch01-getting-started.html" >About Version Control </a>
        </li>
        <li>
          1.2
          <a href="../Getting-Started-A-Short-History-of-Git.html" >A Short History of Git </a>
        </li>
        <li>
          1.3
          <a href="what_is_git_section.html" >What is Git? </a>
        </li>
        <li>
          1.4
          <a href="../Getting-Started-The-Command-Line.html" >The Command Line </a>
        </li>
        <li>
          1.5
          <a href="../Getting-Started-Installing-Git.html" >Installing Git </a>
        </li>
        <li>
          1.6
          <a href="_editor.html" >First-Time Git Setup </a>
        </li>
        <li>
          1.7
          <a href="_git_help.html" >Getting Help </a>
        </li>
        <li>
          1.8
          <a href="../Getting-Started-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>2. <a href="_git_cloning.html">Git Basics</a></h2>
    <ol>
        <li>
          2.1
          <a href="_git_cloning.html" >Getting a Git Repository </a>
        </li>
        <li>
          2.2
          <a href="_git_mv.html" >Recording Changes to the Repository </a>
        </li>
        <li>
          2.3
          <a href="_viewing_history.html" >Viewing the Commit History </a>
        </li>
        <li>
          2.4
          <a href="_unstaging.html" >Undoing Things </a>
        </li>
        <li>
          2.5
          <a href="_remote_repos.html" >Working with Remotes </a>
        </li>
        <li>
          2.6
          <a href="_annotated_tags.html" >Tagging </a>
        </li>
        <li>
          2.7
          <a href="_git_aliases.html" >Git Aliases </a>
        </li>
        <li>
          2.8
          <a href="../Git-Basics-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>3. <a href="_switching_branches.html">Git Branching</a></h2>
    <ol>
        <li>
          3.1
          <a href="_switching_branches.html" >Branches in a Nutshell </a>
        </li>
        <li>
          3.2
          <a href="_basic_branching.html" >Basic Branching and Merging </a>
        </li>
        <li>
          3.3
          <a href="_branch_management.html" >Branch Management </a>
        </li>
        <li>
          3.4
          <a href="_topic_branch.html" >Branching Workflows </a>
        </li>
        <li>
          3.5
          <a href="_delete_branches.html" >Remote Branches </a>
        </li>
        <li>
          3.6
          <a href="_rebase_rebase.html" >Rebasing </a>
        </li>
        <li>
          3.7
          <a href="../Git-Branching-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>4. <a href="../Git-on-the-Server-The-Protocols.html">Git on the Server</a></h2>
    <ol>
        <li>
          4.1
          <a href="../Git-on-the-Server-The-Protocols.html" >The Protocols </a>
        </li>
        <li>
          4.2
          <a href="_bare_repo.html" >Getting Git on a Server </a>
        </li>
        <li>
          4.3
          <a href="_generate_ssh_key.html" >Generating Your SSH Public Key </a>
        </li>
        <li>
          4.4
          <a href="_setting_up_server.html" class=active>Setting Up the Server </a>
        </li>
        <li>
          4.5
          <a href="../Git-on-the-Server-Git-Daemon.html" >Git Daemon </a>
        </li>
        <li>
          4.6
          <a href="../Git-on-the-Server-Smart-HTTP.html" >Smart HTTP </a>
        </li>
        <li>
          4.7
          <a href="../Git-on-the-Server-GitWeb.html" >GitWeb </a>
        </li>
        <li>
          4.8
          <a href="_gitlab_groups_section.html" >GitLab </a>
        </li>
        <li>
          4.9
          <a href="../Git-on-the-Server-Third-Party-Hosted-Options.html" >Third Party Hosted Options </a>
        </li>
        <li>
          4.10
          <a href="../Git-on-the-Server-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>5. <a href="_integration_manager.html">Distributed Git</a></h2>
    <ol>
        <li>
          5.1
          <a href="_integration_manager.html" >Distributed Workflows </a>
        </li>
        <li>
          5.2
          <a href="_project_over_email.html" >Contributing to a Project </a>
        </li>
        <li>
          5.3
          <a href="_git_am.html" >Maintaining a Project </a>
        </li>
        <li>
          5.4
          <a href="../Distributed-Git-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
</ol>

    </div>
    <div class='column-middle'>
      <ol class='book-toc'>
  <li class='chapter'>
  <h2>6. <a href="_personal_avatar.html">GitHub</a></h2>
    <ol>
        <li>
          6.1
          <a href="_personal_avatar.html" >Account Setup and Configuration </a>
        </li>
        <li>
          6.2
          <a href="_fetch_and_push_on_different_repositories.html" >Contributing to a Project </a>
        </li>
        <li>
          6.3
          <a href="_email_notifications.html" >Maintaining a Project </a>
        </li>
        <li>
          6.4
          <a href="_team_page.html" >Managing an organization </a>
        </li>
        <li>
          6.5
          <a href="_commit_status.html" >Scripting GitHub </a>
        </li>
        <li>
          6.6
          <a href="../GitHub-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>7. <a href="_git_reflog.html">Git Tools</a></h2>
    <ol>
        <li>
          7.1
          <a href="_git_reflog.html" >Revision Selection </a>
        </li>
        <li>
          7.2
          <a href="_interactive_staging.html" >Interactive Staging </a>
        </li>
        <li>
          7.3
          <a href="_git_clean.html" >Stashing and Cleaning </a>
        </li>
        <li>
          7.4
          <a href="_signing_commits.html" >Signing Your Work </a>
        </li>
        <li>
          7.5
          <a href="_git_grep.html" >Searching </a>
        </li>
        <li>
          7.6
          <a href="_removing_file_every_commit.html" >Rewriting History </a>
        </li>
        <li>
          7.7
          <a href="_the_index.html" >Reset Demystified </a>
        </li>
        <li>
          7.8
          <a href="_reverse_commit.html" >Advanced Merging </a>
        </li>
        <li>
          7.9
          <a href="ref_rerere.html" >Rerere </a>
        </li>
        <li>
          7.10
          <a href="_file_annotation.html" >Debugging with Git </a>
        </li>
        <li>
          7.11
          <a href="_publishing_submodules.html" >Submodules </a>
        </li>
        <li>
          7.12
          <a href="_bundling.html" >Bundling </a>
        </li>
        <li>
          7.13
          <a href="_replace.html" >Replace </a>
        </li>
        <li>
          7.14
          <a href="_credential_caching.html" >Credential Storage </a>
        </li>
        <li>
          7.15
          <a href="../Git-Tools-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>8. <a href="_external_merge_tools.html">Customizing Git</a></h2>
    <ol>
        <li>
          8.1
          <a href="_external_merge_tools.html" >Git Configuration </a>
        </li>
        <li>
          8.2
          <a href="_keyword_expansion.html" >Git Attributes </a>
        </li>
        <li>
          8.3
          <a href="_email_hooks.html" >Git Hooks </a>
        </li>
        <li>
          8.4
          <a href="_enforcing_commit_message_format.html" >An Example Git-Enforced Policy </a>
        </li>
        <li>
          8.5
          <a href="../Customizing-Git-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>9. <a href="_git_svn.html">Git and Other Systems</a></h2>
    <ol>
        <li>
          9.1
          <a href="_git_svn.html" >Git as a Client </a>
        </li>
        <li>
          9.2
          <a href="_git_p4.html" >Migrating to Git </a>
        </li>
        <li>
          9.3
          <a href="../Git-and-Other-Systems-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>10. <a href="_plumbing_porcelain.html">Git Internals</a></h2>
    <ol>
        <li>
          10.1
          <a href="_plumbing_porcelain.html" >Plumbing and Porcelain </a>
        </li>
        <li>
          10.2
          <a href="_git_commit_objects.html" >Git Objects </a>
        </li>
        <li>
          10.3
          <a href="ref_the_ref.html" >Git References </a>
        </li>
        <li>
          10.4
          <a href="../Git-Internals-Packfiles.html" >Packfiles </a>
        </li>
        <li>
          10.5
          <a href="_pushing_refspecs.html" >The Refspec </a>
        </li>
        <li>
          10.6
          <a href="../Git-Internals-Transfer-Protocols.html" >Transfer Protocols </a>
        </li>
        <li>
          10.7
          <a href="_git_gc.html" >Maintenance and Data Recovery </a>
        </li>
        <li>
          10.8
          <a href="../Git-Internals-Environment-Variables.html" >Environment Variables </a>
        </li>
        <li>
          10.9
          <a href="../Git-Internals-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
</ol>

    </div>
    <div class='column-right'>
      <ol class='book-toc'>
  <li class='chapter'>
  <h2>A1. <a href="../Appendix-A:-Git-in-Other-Environments-Graphical-Interfaces.html">Appendix A: Git in Other Environments</a></h2>
    <ol>
        <li>
          A1.1
          <a href="../Appendix-A:-Git-in-Other-Environments-Graphical-Interfaces.html" >Graphical Interfaces </a>
        </li>
        <li>
          A1.2
          <a href="../Appendix-A:-Git-in-Other-Environments-Git-in-Visual-Studio.html" >Git in Visual Studio </a>
        </li>
        <li>
          A1.3
          <a href="../Appendix-A:-Git-in-Other-Environments-Git-in-Visual-Studio-Code.html" >Git in Visual Studio Code </a>
        </li>
        <li>
          A1.4
          <a href="../Appendix-A:-Git-in-Other-Environments-Git-in-IntelliJ-%252F-PyCharm-%252F-WebStorm-%252F-PhpStorm-%252F-RubyMine.html" >Git in IntelliJ / PyCharm / WebStorm / PhpStorm / RubyMine </a>
        </li>
        <li>
          A1.5
          <a href="../Appendix-A:-Git-in-Other-Environments-Git-in-Sublime-Text.html" >Git in Sublime Text </a>
        </li>
        <li>
          A1.6
          <a href="../Appendix-A:-Git-in-Other-Environments-Git-in-Bash.html" >Git in Bash </a>
        </li>
        <li>
          A1.7
          <a href="oh_my_zsh_git.html" >Git in Zsh </a>
        </li>
        <li>
          A1.8
          <a href="../Appendix-A:-Git-in-Other-Environments-Git-in-PowerShell.html" >Git in PowerShell </a>
        </li>
        <li>
          A1.9
          <a href="../Appendix-A:-Git-in-Other-Environments-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>A2. <a href="../Appendix-B:-Embedding-Git-in-your-Applications-Command-line-Git.html">Appendix B: Embedding Git in your Applications</a></h2>
    <ol>
        <li>
          A2.1
          <a href="../Appendix-B:-Embedding-Git-in-your-Applications-Command-line-Git.html" >Command-line Git </a>
        </li>
        <li>
          A2.2
          <a href="_libgit2_bindings.html" >Libgit2 </a>
        </li>
        <li>
          A2.3
          <a href="../Appendix-B:-Embedding-Git-in-your-Applications-JGit.html" >JGit </a>
        </li>
        <li>
          A2.4
          <a href="../Appendix-B:-Embedding-Git-in-your-Applications-go-git.html" >go-git </a>
        </li>
        <li>
          A2.5
          <a href="../Appendix-B:-Embedding-Git-in-your-Applications-Dulwich.html" >Dulwich </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>A3. <a href="ch_core_editor.html">Appendix C: Git Commands</a></h2>
    <ol>
        <li>
          A3.1
          <a href="ch_core_editor.html" >Setup and Config </a>
        </li>
        <li>
          A3.2
          <a href="../Appendix-C:-Git-Commands-Getting-and-Creating-Projects.html" >Getting and Creating Projects </a>
        </li>
        <li>
          A3.3
          <a href="../Appendix-C:-Git-Commands-Basic-Snapshotting.html" >Basic Snapshotting </a>
        </li>
        <li>
          A3.4
          <a href="../Appendix-C:-Git-Commands-Branching-and-Merging.html" >Branching and Merging </a>
        </li>
        <li>
          A3.5
          <a href="../Appendix-C:-Git-Commands-Sharing-and-Updating-Projects.html" >Sharing and Updating Projects </a>
        </li>
        <li>
          A3.6
          <a href="../Appendix-C:-Git-Commands-Inspection-and-Comparison.html" >Inspection and Comparison </a>
        </li>
        <li>
          A3.7
          <a href="../Appendix-C:-Git-Commands-Debugging.html" >Debugging </a>
        </li>
        <li>
          A3.8
          <a href="../Appendix-C:-Git-Commands-Patching.html" >Patching </a>
        </li>
        <li>
          A3.9
          <a href="../Appendix-C:-Git-Commands-Email.html" >Email </a>
        </li>
        <li>
          A3.10
          <a href="../Appendix-C:-Git-Commands-External-Systems.html" >External Systems </a>
        </li>
        <li>
          A3.11
          <a href="../Appendix-C:-Git-Commands-Administration.html" >Administration </a>
        </li>
        <li>
          A3.12
          <a href="../Appendix-C:-Git-Commands-Plumbing-Commands.html" >Plumbing Commands </a>
        </li>
    </ol>
  </li>
</ol>

    </div>
  </div>
 </div>

    <span class="light" id="edition">
      2nd Edition
    </span>
</div>

<div id='main' class="book edition2">
    <h1>4.4 Git on the Server - Setting Up the Server</h1>
  <div>
<h2 id="_setting_up_server">Setting Up the Server</h2>
<div class="paragraph">
<p>Let’s walk through setting up SSH access on the server side.
In this example, you’ll use the <code>authorized_keys</code> method for authenticating your users.
We also assume you’re running a standard Linux distribution like Ubuntu.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A good deal of what is described here can be automated by using the <code>ssh-copy-id</code> command, rather than manually copying and installing public keys.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First, you create a <code>git</code> user account and a <code>.ssh</code> directory for that user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo adduser git
$ su git
$ cd
$ mkdir .ssh &amp;&amp; chmod 700 .ssh
$ touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, you need to add some developer SSH public keys to the <code>authorized_keys</code> file for the <code>git</code> user.
Let’s assume you have some trusted public keys and have saved them to temporary files.
Again, the public keys look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /tmp/id_rsa.john.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L
ojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k
Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez
Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv
O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq
dAv8JggJICUvax2T9va5 gsg-keypair</code></pre>
</div>
</div>
<div class="paragraph">
<p>You just append them to the <code>git</code> user’s <code>authorized_keys</code> file in its <code>.ssh</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /tmp/id_rsa.john.pub &gt;&gt; ~/.ssh/authorized_keys
$ cat /tmp/id_rsa.josie.pub &gt;&gt; ~/.ssh/authorized_keys
$ cat /tmp/id_rsa.jessica.pub &gt;&gt; ~/.ssh/authorized_keys</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, you can set up an empty repository for them by running <code>git init</code> with the <code>--bare</code> option, which initializes the repository without a working directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd /srv/git
$ mkdir project.git
$ cd project.git
$ git init --bare
Initialized empty Git repository in /srv/git/project.git/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, John, Josie, or Jessica can push the first version of their project into that repository by adding it as a remote and pushing up a branch.
Note that someone must shell onto the machine and create a bare repository every time you want to add a project.
Let’s use <code>gitserver</code> as the hostname of the server on which you’ve set up your <code>git</code> user and repository.
If you’re running it internally, and you set up DNS for <code>gitserver</code> to point to that server, then you can use the commands pretty much as is (assuming that <code>myproject</code> is an existing project with files in it):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># on John's computer
$ cd myproject
$ git init
$ git add .
$ git commit -m 'Initial commit'
$ git remote add origin git@gitserver:/srv/git/project.git
$ git push origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the others can clone it down and push changes back up just as easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone git@gitserver:/srv/git/project.git
$ cd project
$ vim README
$ git commit -am 'Fix for README file'
$ git push origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this method, you can quickly get a read/write Git server up and running for a handful of developers.</p>
</div>
<div class="paragraph">
<p>You should note that currently all these users can also log into the server and get a shell as the <code>git</code> user.
If you want to restrict that, you will have to change the shell to something else in the <code>/etc/passwd</code> file.</p>
</div>
<div class="paragraph">
<p>You can easily restrict the <code>git</code> user account to only Git-related activities with a limited shell tool called <code>git-shell</code> that comes with Git.
If you set this as the <code>git</code> user account’s login shell, then that account can’t have normal shell access to your server.
To use this, specify <code>git-shell</code> instead of <code>bash</code> or <code>csh</code> for that account’s login shell.
To do so, you must first add the full pathname of the <code>git-shell</code> command to <code>/etc/shells</code> if it’s not already there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /etc/shells   # see if git-shell is already in there. If not...
$ which git-shell   # make sure git-shell is installed on your system.
$ sudo -e /etc/shells  # and add the path to git-shell from last command</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can edit the shell for a user using <code>chsh &lt;username&gt; -s &lt;shell&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo chsh git -s $(which git-shell)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, the <code>git</code> user can still use the SSH connection to push and pull Git repositories but can’t shell onto the machine.
If you try, you’ll see a login rejection like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh git@gitserver
fatal: Interactive git shell is not enabled.
hint: ~/git-shell-commands should exist and have read and execute access.
Connection to gitserver closed.</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, users are still able to use SSH port forwarding to access any host the git server is able to reach.
If you want to prevent that, you can edit the <code>authorized_keys</code> file and prepend the following options to each key you’d like to restrict:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat ~/.ssh/authorized_keys
no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa
AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4LojG6rs6h
PB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4kYjh6541N
YsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9EzSdfd8AcC
IicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myivO7TCUSBd
LQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPqdAv8JggJ
ICUvax2T9va5 gsg-keypair

no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa
AAAAB3NzaC1yc2EAAAADAQABAAABAQDEwENNMomTboYI+LJieaAY16qiXiH3wuvENhBG...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now Git network commands will still work just fine but the users won’t be able to get a shell.
As the output states, you can also set up a directory in the <code>git</code> user’s home directory that customizes the <code>git-shell</code> command a bit.
For instance, you can restrict the Git commands that the server will accept or you can customize the message that users see if they try to SSH in like that.
Run <code>git help shell</code> for more information on customizing the shell.</p>
</div>
<div id="nav"><a href="_generate_ssh_key.html">prev</a> | <a href="../Git-on-the-Server-Git-Daemon.html">next</a></div></div>
</div>

        </div>
      </div>
      <footer>
  <div class="site-source">
    <a href="https://git-scm.com/site">About this site</a><br>
    Patches, suggestions, and comments are welcome.
  </div>
  <div class="sfc-member">
    Git is a member of <a href="https://git-scm.com/sfc">Software Freedom Conservancy</a>
  </div>
</footer>
<a href="_setting_up_server.html#top" class="no-js scrollToTop" id="scrollToTop" data-label="Scroll to top">
  <img src="../chevron-up@2x.png" width="20" height="20" alt="scroll-to-top"/>
</a>
<script src="../application-b09f91f7c527919e4bc194769429065537d64a7f73b9fe93b107afef32b02939.js"></script>

    </div>

</body>
</html>

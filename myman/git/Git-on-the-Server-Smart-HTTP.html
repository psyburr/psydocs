<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49925874-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-49925874-3');
  </script>

  <meta charset='utf-8'>
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Git - Smart HTTP</title>

  <link href='favicon.ico' rel='shortcut icon' type='image/x-icon'>

  <link rel="stylesheet" media="screen" href="application-317ee030890d2caf96a53cbcc2a67040b748b2506d55661fc9c6754d0a024f59.css" />
  <script src="modernize-b3ebe0c31c24f230dc62179d3e1030d2e57a53b1668d9382c0a27dbd44a94beb.js"></script>
  <!--[if (gte IE 6)&(lte IE 8)]>
  <script src="/javascripts/selectivizr-min.js"></script>
  <![endif]-->

</head>

<body id="documentation">

  <div class="inner">
    <header>

  <a href="https://git-scm.com/"><img src="logo@2x.png" width="110" height="46" alt="Git" /></a>
  <span id="tagline"></span>
  <script type="text/javascript">
    var taglines = ["fast-version-control","everything-is-local","distributed-even-if-your-workflow-isnt","local-branching-on-the-cheap","distributed-is-the-new-centralized"];
    var tagline = taglines[Math.floor(Math.random() * taglines.length)];
    document.getElementById('tagline').innerHTML = '--' + tagline;
  </script>
  <form id="search" action="https://git-scm.com/search/results">
    <input id="search-text" name="search" placeholder="Search entire site..." autocomplete="off" type="text" />
  </form>
  <div id="search-results"></div>

</header>

  </div> <!-- .inner -->

    <div class="inner">
      <div id="content-wrapper">
        <button class="sidebar-btn"></button>
<aside class="sidebar" id="sidebar">
  <nav>
    <ul>
      <li>
        <a href="https://git-scm.com/about">About</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/about">Branching and Merging</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/small-and-fast">Small and Fast</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/distributed">Distributed</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/info-assurance">Data Assurance</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/staging-area">Staging Area</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/free-and-open-source">Free and Open Source</a>
          </li>
          <li>
            <a href="https://git-scm.com/about/trademark">Trademark</a>
          </li>
        </ul>
      </li>
      <li>
        <a class="active" href="https://git-scm.com/doc">Documentation</a>
        <ul class="expanded">
          <li>
            <a href="https://git-scm.com/docs">Reference</a>
          </li>
          <li>
            <a class="active" href="https://git-scm.com/book">Book</a>
          </li>
          <li>
            <a href="https://git-scm.com/videos">Videos</a>
          </li>
          <li>
            <a href="https://git-scm.com/doc/ext">External Links</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/downloads">Downloads</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/downloads/guis">GUI Clients</a>
          </li>
          <li>
            <a href="https://git-scm.com/downloads/logos">Logos</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/community">Community</a>
      </li>
    </ul>
      <hr class="sidebar">
        <p>
This book is available in
  <a href="https://git-scm.com/book/en">English</a>.
</p>
<p>
  Full translation available in
  <table>
    <tr><td><a href="https://git-scm.com/book/az">azərbaycan dili</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/bg">български език</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/de">Deutsch</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/es">Español</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/fr">Français</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/gr">Ελληνικά</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ja">日本語</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ko">한국어</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/nl">Nederlands</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ru">Русский</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/sl">Slovenščina</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/tl">Tagalog</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/uk">Українська</a></td></tr>
    <tr><td><a href="https://git-scm.com/book/zh">简体中文</a>,</td></tr>
  </table>
</p>
<p>
  Partial translations available in
  <table>
    <tr><td><a href="https://git-scm.com/book/cs">Čeština</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/mk">Македонски</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/pl">Polski</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/sr">Српски</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/uz">Ўзбекча</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/zh-tw">繁體中文</a>,</td></tr>
  </table>
</p>
<p>
  Translations started for
  <table>
    <tr><td><a href="https://git-scm.com/book/be">Беларуская</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/fa" dir="rtl">فارسی</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/id">Indonesian</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/it">Italiano</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/ms">Bahasa Melayu</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/pt-br">Português (Brasil)</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/pt-pt">Português (Portugal)</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/sv">Svenska</a>,</td></tr>
    <tr><td><a href="https://git-scm.com/book/tr">Türkçe</a>.</td></tr>
  </table>
</p>
<hr class="sidebar"/>
<p>
The source of this book is <a href="https://github.com/progit/progit2">hosted on GitHub.</a></br>
Patches, suggestions and comments are welcome.
</p>


  </nav>
</aside>

        <div id="content">
          

<div id='book-chapters'>
  <a class="dropdown-trigger" id="book-chapters-trigger" data-panel-id="chapters-dropdown" href="Git-on-the-Server-Smart-HTTP.html#">Chapters ▾</a>
<div class='dropdown-panel' id='chapters-dropdown'>
  <div class="three-column">
    <div class='column-left'>
      <ol class='book-toc'>
  <li class='chapter'>
  <h2>1. <a href="ch00/ch01-getting-started.html">Getting Started</a></h2>
    <ol>
        <li>
          1.1
          <a href="ch00/ch01-getting-started.html" >About Version Control </a>
        </li>
        <li>
          1.2
          <a href="Getting-Started-A-Short-History-of-Git.html" >A Short History of Git </a>
        </li>
        <li>
          1.3
          <a href="ch00/what_is_git_section.html" >What is Git? </a>
        </li>
        <li>
          1.4
          <a href="Getting-Started-The-Command-Line.html" >The Command Line </a>
        </li>
        <li>
          1.5
          <a href="Getting-Started-Installing-Git.html" >Installing Git </a>
        </li>
        <li>
          1.6
          <a href="ch00/_editor.html" >First-Time Git Setup </a>
        </li>
        <li>
          1.7
          <a href="ch00/_git_help.html" >Getting Help </a>
        </li>
        <li>
          1.8
          <a href="Getting-Started-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>2. <a href="ch00/_git_cloning.html">Git Basics</a></h2>
    <ol>
        <li>
          2.1
          <a href="ch00/_git_cloning.html" >Getting a Git Repository </a>
        </li>
        <li>
          2.2
          <a href="ch00/_git_mv.html" >Recording Changes to the Repository </a>
        </li>
        <li>
          2.3
          <a href="ch00/_viewing_history.html" >Viewing the Commit History </a>
        </li>
        <li>
          2.4
          <a href="ch00/_unstaging.html" >Undoing Things </a>
        </li>
        <li>
          2.5
          <a href="ch00/_remote_repos.html" >Working with Remotes </a>
        </li>
        <li>
          2.6
          <a href="ch00/_annotated_tags.html" >Tagging </a>
        </li>
        <li>
          2.7
          <a href="ch00/_git_aliases.html" >Git Aliases </a>
        </li>
        <li>
          2.8
          <a href="Git-Basics-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>3. <a href="ch00/_switching_branches.html">Git Branching</a></h2>
    <ol>
        <li>
          3.1
          <a href="ch00/_switching_branches.html" >Branches in a Nutshell </a>
        </li>
        <li>
          3.2
          <a href="ch00/_basic_branching.html" >Basic Branching and Merging </a>
        </li>
        <li>
          3.3
          <a href="ch00/_branch_management.html" >Branch Management </a>
        </li>
        <li>
          3.4
          <a href="ch00/_topic_branch.html" >Branching Workflows </a>
        </li>
        <li>
          3.5
          <a href="ch00/_delete_branches.html" >Remote Branches </a>
        </li>
        <li>
          3.6
          <a href="ch00/_rebase_rebase.html" >Rebasing </a>
        </li>
        <li>
          3.7
          <a href="Git-Branching-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>4. <a href="Git-on-the-Server-The-Protocols.html">Git on the Server</a></h2>
    <ol>
        <li>
          4.1
          <a href="Git-on-the-Server-The-Protocols.html" >The Protocols </a>
        </li>
        <li>
          4.2
          <a href="ch00/_bare_repo.html" >Getting Git on a Server </a>
        </li>
        <li>
          4.3
          <a href="ch00/_generate_ssh_key.html" >Generating Your SSH Public Key </a>
        </li>
        <li>
          4.4
          <a href="ch00/_setting_up_server.html" >Setting Up the Server </a>
        </li>
        <li>
          4.5
          <a href="Git-on-the-Server-Git-Daemon.html" >Git Daemon </a>
        </li>
        <li>
          4.6
          <a href="Git-on-the-Server-Smart-HTTP.html" class=active>Smart HTTP </a>
        </li>
        <li>
          4.7
          <a href="Git-on-the-Server-GitWeb.html" >GitWeb </a>
        </li>
        <li>
          4.8
          <a href="ch00/_gitlab_groups_section.html" >GitLab </a>
        </li>
        <li>
          4.9
          <a href="Git-on-the-Server-Third-Party-Hosted-Options.html" >Third Party Hosted Options </a>
        </li>
        <li>
          4.10
          <a href="Git-on-the-Server-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>5. <a href="ch00/_integration_manager.html">Distributed Git</a></h2>
    <ol>
        <li>
          5.1
          <a href="ch00/_integration_manager.html" >Distributed Workflows </a>
        </li>
        <li>
          5.2
          <a href="ch00/_project_over_email.html" >Contributing to a Project </a>
        </li>
        <li>
          5.3
          <a href="ch00/_git_am.html" >Maintaining a Project </a>
        </li>
        <li>
          5.4
          <a href="Distributed-Git-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
</ol>

    </div>
    <div class='column-middle'>
      <ol class='book-toc'>
  <li class='chapter'>
  <h2>6. <a href="ch00/_personal_avatar.html">GitHub</a></h2>
    <ol>
        <li>
          6.1
          <a href="ch00/_personal_avatar.html" >Account Setup and Configuration </a>
        </li>
        <li>
          6.2
          <a href="ch00/_fetch_and_push_on_different_repositories.html" >Contributing to a Project </a>
        </li>
        <li>
          6.3
          <a href="ch00/_email_notifications.html" >Maintaining a Project </a>
        </li>
        <li>
          6.4
          <a href="ch00/_team_page.html" >Managing an organization </a>
        </li>
        <li>
          6.5
          <a href="ch00/_commit_status.html" >Scripting GitHub </a>
        </li>
        <li>
          6.6
          <a href="GitHub-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>7. <a href="ch00/_git_reflog.html">Git Tools</a></h2>
    <ol>
        <li>
          7.1
          <a href="ch00/_git_reflog.html" >Revision Selection </a>
        </li>
        <li>
          7.2
          <a href="ch00/_interactive_staging.html" >Interactive Staging </a>
        </li>
        <li>
          7.3
          <a href="ch00/_git_clean.html" >Stashing and Cleaning </a>
        </li>
        <li>
          7.4
          <a href="ch00/_signing_commits.html" >Signing Your Work </a>
        </li>
        <li>
          7.5
          <a href="ch00/_git_grep.html" >Searching </a>
        </li>
        <li>
          7.6
          <a href="ch00/_removing_file_every_commit.html" >Rewriting History </a>
        </li>
        <li>
          7.7
          <a href="ch00/_the_index.html" >Reset Demystified </a>
        </li>
        <li>
          7.8
          <a href="ch00/_reverse_commit.html" >Advanced Merging </a>
        </li>
        <li>
          7.9
          <a href="ch00/ref_rerere.html" >Rerere </a>
        </li>
        <li>
          7.10
          <a href="ch00/_file_annotation.html" >Debugging with Git </a>
        </li>
        <li>
          7.11
          <a href="ch00/_publishing_submodules.html" >Submodules </a>
        </li>
        <li>
          7.12
          <a href="ch00/_bundling.html" >Bundling </a>
        </li>
        <li>
          7.13
          <a href="ch00/_replace.html" >Replace </a>
        </li>
        <li>
          7.14
          <a href="ch00/_credential_caching.html" >Credential Storage </a>
        </li>
        <li>
          7.15
          <a href="Git-Tools-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>8. <a href="ch00/_external_merge_tools.html">Customizing Git</a></h2>
    <ol>
        <li>
          8.1
          <a href="ch00/_external_merge_tools.html" >Git Configuration </a>
        </li>
        <li>
          8.2
          <a href="ch00/_keyword_expansion.html" >Git Attributes </a>
        </li>
        <li>
          8.3
          <a href="ch00/_email_hooks.html" >Git Hooks </a>
        </li>
        <li>
          8.4
          <a href="ch00/_enforcing_commit_message_format.html" >An Example Git-Enforced Policy </a>
        </li>
        <li>
          8.5
          <a href="Customizing-Git-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>9. <a href="ch00/_git_svn.html">Git and Other Systems</a></h2>
    <ol>
        <li>
          9.1
          <a href="ch00/_git_svn.html" >Git as a Client </a>
        </li>
        <li>
          9.2
          <a href="ch00/_git_p4.html" >Migrating to Git </a>
        </li>
        <li>
          9.3
          <a href="Git-and-Other-Systems-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>10. <a href="ch00/_plumbing_porcelain.html">Git Internals</a></h2>
    <ol>
        <li>
          10.1
          <a href="ch00/_plumbing_porcelain.html" >Plumbing and Porcelain </a>
        </li>
        <li>
          10.2
          <a href="ch00/_git_commit_objects.html" >Git Objects </a>
        </li>
        <li>
          10.3
          <a href="ch00/ref_the_ref.html" >Git References </a>
        </li>
        <li>
          10.4
          <a href="Git-Internals-Packfiles.html" >Packfiles </a>
        </li>
        <li>
          10.5
          <a href="ch00/_pushing_refspecs.html" >The Refspec </a>
        </li>
        <li>
          10.6
          <a href="Git-Internals-Transfer-Protocols.html" >Transfer Protocols </a>
        </li>
        <li>
          10.7
          <a href="ch00/_git_gc.html" >Maintenance and Data Recovery </a>
        </li>
        <li>
          10.8
          <a href="Git-Internals-Environment-Variables.html" >Environment Variables </a>
        </li>
        <li>
          10.9
          <a href="Git-Internals-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
</ol>

    </div>
    <div class='column-right'>
      <ol class='book-toc'>
  <li class='chapter'>
  <h2>A1. <a href="./Appendix-A:-Git-in-Other-Environments-Graphical-Interfaces.html">Appendix A: Git in Other Environments</a></h2>
    <ol>
        <li>
          A1.1
          <a href="./Appendix-A:-Git-in-Other-Environments-Graphical-Interfaces.html" >Graphical Interfaces </a>
        </li>
        <li>
          A1.2
          <a href="./Appendix-A:-Git-in-Other-Environments-Git-in-Visual-Studio.html" >Git in Visual Studio </a>
        </li>
        <li>
          A1.3
          <a href="./Appendix-A:-Git-in-Other-Environments-Git-in-Visual-Studio-Code.html" >Git in Visual Studio Code </a>
        </li>
        <li>
          A1.4
          <a href="./Appendix-A:-Git-in-Other-Environments-Git-in-IntelliJ-%252F-PyCharm-%252F-WebStorm-%252F-PhpStorm-%252F-RubyMine.html" >Git in IntelliJ / PyCharm / WebStorm / PhpStorm / RubyMine </a>
        </li>
        <li>
          A1.5
          <a href="./Appendix-A:-Git-in-Other-Environments-Git-in-Sublime-Text.html" >Git in Sublime Text </a>
        </li>
        <li>
          A1.6
          <a href="./Appendix-A:-Git-in-Other-Environments-Git-in-Bash.html" >Git in Bash </a>
        </li>
        <li>
          A1.7
          <a href="ch00/oh_my_zsh_git.html" >Git in Zsh </a>
        </li>
        <li>
          A1.8
          <a href="./Appendix-A:-Git-in-Other-Environments-Git-in-PowerShell.html" >Git in PowerShell </a>
        </li>
        <li>
          A1.9
          <a href="./Appendix-A:-Git-in-Other-Environments-Summary.html" >Summary </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>A2. <a href="./Appendix-B:-Embedding-Git-in-your-Applications-Command-line-Git.html">Appendix B: Embedding Git in your Applications</a></h2>
    <ol>
        <li>
          A2.1
          <a href="./Appendix-B:-Embedding-Git-in-your-Applications-Command-line-Git.html" >Command-line Git </a>
        </li>
        <li>
          A2.2
          <a href="ch00/_libgit2_bindings.html" >Libgit2 </a>
        </li>
        <li>
          A2.3
          <a href="./Appendix-B:-Embedding-Git-in-your-Applications-JGit.html" >JGit </a>
        </li>
        <li>
          A2.4
          <a href="./Appendix-B:-Embedding-Git-in-your-Applications-go-git.html" >go-git </a>
        </li>
        <li>
          A2.5
          <a href="./Appendix-B:-Embedding-Git-in-your-Applications-Dulwich.html" >Dulwich </a>
        </li>
    </ol>
  </li>
  <li class='chapter'>
  <h2>A3. <a href="ch00/ch_core_editor.html">Appendix C: Git Commands</a></h2>
    <ol>
        <li>
          A3.1
          <a href="ch00/ch_core_editor.html" >Setup and Config </a>
        </li>
        <li>
          A3.2
          <a href="./Appendix-C:-Git-Commands-Getting-and-Creating-Projects.html" >Getting and Creating Projects </a>
        </li>
        <li>
          A3.3
          <a href="./Appendix-C:-Git-Commands-Basic-Snapshotting.html" >Basic Snapshotting </a>
        </li>
        <li>
          A3.4
          <a href="./Appendix-C:-Git-Commands-Branching-and-Merging.html" >Branching and Merging </a>
        </li>
        <li>
          A3.5
          <a href="./Appendix-C:-Git-Commands-Sharing-and-Updating-Projects.html" >Sharing and Updating Projects </a>
        </li>
        <li>
          A3.6
          <a href="./Appendix-C:-Git-Commands-Inspection-and-Comparison.html" >Inspection and Comparison </a>
        </li>
        <li>
          A3.7
          <a href="./Appendix-C:-Git-Commands-Debugging.html" >Debugging </a>
        </li>
        <li>
          A3.8
          <a href="./Appendix-C:-Git-Commands-Patching.html" >Patching </a>
        </li>
        <li>
          A3.9
          <a href="./Appendix-C:-Git-Commands-Email.html" >Email </a>
        </li>
        <li>
          A3.10
          <a href="./Appendix-C:-Git-Commands-External-Systems.html" >External Systems </a>
        </li>
        <li>
          A3.11
          <a href="./Appendix-C:-Git-Commands-Administration.html" >Administration </a>
        </li>
        <li>
          A3.12
          <a href="./Appendix-C:-Git-Commands-Plumbing-Commands.html" >Plumbing Commands </a>
        </li>
    </ol>
  </li>
</ol>

    </div>
  </div>
 </div>

    <span class="light" id="edition">
      2nd Edition
    </span>
</div>

<div id='main' class="book edition2">
    <h1>4.6 Git on the Server - Smart HTTP</h1>
  <div>
<h2 id="_smart_http_2">Smart HTTP</h2>
<div class="paragraph">
<p>
We now have authenticated access through SSH and unauthenticated access through <code>git://</code>, but there is also a protocol that can do both at the same time.
Setting up Smart HTTP is basically just enabling a CGI script that is provided with Git called <code>git-http-backend</code> on the server.
This CGI will read the path and headers sent by a <code>git fetch</code> or <code>git push</code> to an HTTP URL and determine if the client can communicate over HTTP (which is true for any client since version 1.6.6).
If the CGI sees that the client is smart, it will communicate smartly with it; otherwise it will fall back to the dumb behavior (so it is backward compatible for reads with older clients).</p>
</div>
<div class="paragraph">
<p>Let’s walk through a very basic setup.
We’ll set this up with Apache as the CGI server.
If you don’t have Apache setup, you can do so on a Linux box with something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo apt-get install apache2 apache2-utils
$ a2enmod cgi alias env</code></pre>
</div>
</div>
<div class="paragraph">
<p>This also enables the <code>mod_cgi</code>, <code>mod_alias</code>, and <code>mod_env</code> modules, which are all needed for this to work properly.</p>
</div>
<div class="paragraph">
<p>You’ll also need to set the Unix user group of the <code>/srv/git</code> directories to <code>www-data</code> so your web server can read- and write-access the repositories, because the Apache instance running the CGI script will (by default) be running as that user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ chgrp -R www-data /srv/git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next we need to add some things to the Apache configuration to run the <code>git-http-backend</code> as the handler for anything coming into the <code>/git</code> path of your web server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">SetEnv GIT_PROJECT_ROOT /srv/git
SetEnv GIT_HTTP_EXPORT_ALL
ScriptAlias /git/ /usr/lib/git-core/git-http-backend/</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you leave out <code>GIT_HTTP_EXPORT_ALL</code> environment variable, then Git will only serve to unauthenticated clients the repositories with the <code>git-daemon-export-ok</code> file in them, just like the Git daemon did.</p>
</div>
<div class="paragraph">
<p>Finally you’ll want to tell Apache to allow requests to <code>git-http-backend</code> and make writes be authenticated somehow, possibly with an Auth block like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&lt;Files "git-http-backend"&gt;
    AuthType Basic
    AuthName "Git Access"
    AuthUserFile /srv/git/.htpasswd
    Require expr !(%{QUERY_STRING} -strmatch '*service=git-receive-pack*' || %{REQUEST_URI} =~ m#/git-receive-pack$#)
    Require valid-user
&lt;/Files&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>That will require you to create a <code>.htpasswd</code> file containing the passwords of all the valid users.
Here is an example of adding a “schacon” user to the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ htpasswd -c /srv/git/.htpasswd schacon</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are tons of ways to have Apache authenticate users, you’ll have to choose and implement one of them.
This is just the simplest example we could come up with.
You’ll also almost certainly want to set this up over SSL so all this data is encrypted.</p>
</div>
<div class="paragraph">
<p>We don’t want to go too far down the rabbit hole of Apache configuration specifics, since you could well be using a different server or have different authentication needs.
The idea is that Git comes with a CGI called <code>git-http-backend</code> that when invoked will do all the negotiation to send and receive data over HTTP.
It does not implement any authentication itself, but that can easily be controlled at the layer of the web server that invokes it.
You can do this with nearly any CGI-capable web server, so go with the one that you know best.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For more information on configuring authentication in Apache, check out the Apache docs here: <a href="https://httpd.apache.org/docs/current/howto/auth.html" class="bare" target="_blank" rel="noopener">https://httpd.apache.org/docs/current/howto/auth.html</a></p>
</div>
</td>
</tr>
</table>
</div>
<div id="nav"><a href="Git-on-the-Server-Git-Daemon.html">prev</a> | <a href="Git-on-the-Server-GitWeb.html">next</a></div></div>
</div>

        </div>
      </div>
      <footer>
  <div class="site-source">
    <a href="https://git-scm.com/site">About this site</a><br>
    Patches, suggestions, and comments are welcome.
  </div>
  <div class="sfc-member">
    Git is a member of <a href="https://git-scm.com/sfc">Software Freedom Conservancy</a>
  </div>
</footer>
<a href="Git-on-the-Server-Smart-HTTP.html#top" class="no-js scrollToTop" id="scrollToTop" data-label="Scroll to top">
  <img src="chevron-up@2x.png" width="20" height="20" alt="scroll-to-top"/>
</a>
<script src="application-b09f91f7c527919e4bc194769429065537d64a7f73b9fe93b107afef32b02939.js"></script>

    </div>

</body>
</html>
